!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@wordpress/blocks"),require("react"),require("@wordpress/i18n"),require("@wordpress/block-editor"),require("@wordpress/components"),require("@wordpress/data"),require("@wordpress/hooks")):"function"==typeof define&&define.amd?define(["@wordpress/blocks","react","@wordpress/i18n","@wordpress/block-editor","@wordpress/components","@wordpress/data","@wordpress/hooks"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).wp.blocks,e.React,e.wp.i18n,e.wp.blockEditor,e.wp.components,e.wp.data,e.wp.hooks)}(this,(function(e,t,n,r,o,a,i){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=s(t);const c={renderPrefix:"",renderSuffix:"",postId:0,nonce:""},u=()=>{const e=window.vfGutenberg||{};for(let[t,n]of Object.entries(c))e.hasOwnProperty(t)||(e[t]=n);return e};function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=wp.element.createElement(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement(o.Path,{d:"M19 7h-1V5h-4v2h-4V5H6v2H5c-1.1 0-2 .9-2 2v10h18V9c0-1.1-.9-2-2-2zm0 10H5V9h14v8z"}),wp.element.createElement(o.Path,{d:"M10.943 16c.522-1.854.972-3.726 1.386-5.58h-1.323a126.482 126.482 0 01-.918 4.383h-.081c-.342-1.44-.657-2.988-.936-4.428l-1.35.09c.414 1.854.873 3.681 1.395 5.535h1.827zm5.161-2.169H14.16V16h-1.332v-5.58h3.636v1.098H14.16v1.296h1.944v1.017z"}));const m=()=>({icon:f,keywords:[n.__("VF"),n.__("Visual Framework"),n.__("EMBL")],attributes:{ver:{type:"string"}},supports:{align:!1,className:!1,customClassName:!1,html:!1},edit:()=>null,save:()=>null});function d(e,t){var n,r;if(0===t.length)return e;for(n=0,r=t.length;n<r;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e<0?-2*e:e}function h(e,t,n,r){var o,a=d(d(d(e,n),(o=t,Object.prototype.toString.call(o))),typeof t);if(null===t)return d(a,"null");if(void 0===t)return d(a,"undefined");if("object"==typeof t||"function"==typeof t){if(-1!==r.indexOf(t))return d(a,"[Circular]"+n);r.push(t);var i=function(e,t,n){return Object.keys(t).sort().reduce((function(e,r){return h(e,t[r],r,n)}),e)}(a,t,r);if(!("valueOf"in t)||"function"!=typeof t.valueOf)return i;try{return d(i,String(t.valueOf()))}catch(e){return d(i,"[valueOf exception]"+(e.stack||e.message))}}return d(a,t.toString())}const v=e=>function(e,t){for(;e.length<t;)e="0"+e;return e}(h(0,e,"",[]).toString(16),8),b={},g=e=>{const{help:t,label:n,...r}=e.field;return wp.element.createElement(o.BaseControl,{help:t},wp.element.createElement("div",{className:"components-base-control__button"},wp.element.createElement(o.Button,r,n)))},y=e=>{const{attrs:t,field:n,label:r,name:a,onChange:i}=e;return wp.element.createElement(o.BaseControl,{label:r,className:"components-radio-control"},n.options.map((e=>wp.element.createElement("div",{key:v(e),className:"components-radio-control__option"},wp.element.createElement(o.CheckboxControl,{label:e.label,checked:(t[a]||[]).includes(e.value),onChange:n=>{const r=(t[a]||[]).filter((t=>t!==e.value));n&&r.push(e.value),i(a,r)}})))))},_=e=>{const{value:t,min:r,max:a,onChange:i}=e,s={label:n.__("Number of Columns"),className:"components-vf-control"};e.help&&(s.help=e.help);const l=e=>e+r===t;return wp.element.createElement(o.BaseControl,s,wp.element.createElement(o.ButtonGroup,{"aria-label":s.label},Array(a-r+1).fill().map(((e,t)=>wp.element.createElement(o.Button,{key:t,isPrimary:l(t),"aria-pressed":l(t),onClick:()=>i(t+r)},t+r)))))},w=e=>wp.element.createElement(o.BaseControl,{label:e.label},wp.element.createElement(o.DatePicker,{currentDate:e.currentDate,onChange:e.onChange})),k={},x=e=>{const[n,r]=t.useState([]);return t.useEffect((()=>{(async()=>{if(k.hasOwnProperty(e))return void r(k[e]);const{postId:t,nonce:n}=u();try{const o=await wp.ajax.post("vf/gutenberg/fetch_terms",{taxonomy:e,postId:t,nonce:n});o&&o.hasOwnProperty("terms")&&(k[e]=o.terms,r(o.terms))}catch(e){}})()}),[e]),n},E=e=>{let t=[{label:n.__("Loading…"),value:e.value}];const r=x(e.taxonomy);r.length&&(t=r.map((e=>({label:e.name,value:parseInt(e.term_id)}))),t.unshift({label:n.__("Select…"),value:""}));return wp.element.createElement(o.SelectControl,p({},e,{onChange:t=>{const n=parseInt(t);t=isNaN(n)?"":n,e.onChange(t)},options:t}))},L=e=>{let t="";return e.disableSuggestions||(t+="has-suggestions"),wp.element.createElement(o.BaseControl,{label:e.label},wp.element.createElement(r.URLInput,{autoFocus:!1,className:t,disableSuggestions:e.disableSuggestions,onChange:e.onChange,value:e.value}))},O=e=>wp.element.createElement(o.BaseControl,{label:e.label},wp.element.createElement("div",{className:"components-base-control__rich-text"},wp.element.createElement(r.RichText,{tagName:e.tag,value:e.value,placeholder:e.placeholder,onChange:e.onChange}))),F=["date","date_picker"],S=["rich","wysiwyg"],C=["text","email"],j=["bool","boolean","toggle","true_false"],B=e=>{const{attributes:t,setAttributes:r,fields:a}=e,i=(e,t)=>{const n={};n[e]=t,r({...n})},s=[];return e.children&&s.push(e.children),s.push(a.map((e=>{let{control:r,help:a,label:s,name:l,onChange:c}=e;const u=v(e);if(c="function"==typeof c?c:i,"button"===r)return wp.element.createElement(g,{key:u,field:e,label:s});if("checkbox"===r)return wp.element.createElement(y,{key:u,name:l,attrs:t,field:e,label:s,onChange:c});if("columns"===r){const t=isNaN(e.min)?1:parseInt(e.min),n=isNaN(e.max)?6:parseInt(e.max),r=isNaN(e.value)?0:parseInt(e.value);return wp.element.createElement(_,{key:u,min:t,max:n,help:a,value:r,onChange:e.onChange})}if(F.includes(r)){let e=new Date(t[l]);return isNaN(e.getTime())&&(e=Date.now()),wp.element.createElement(w,{key:u,label:s,currentDate:e,onChange:e=>c(l,e)})}if("number"===r){const n=parseInt(e.min)||void 0,r=parseInt(e.max)||void 0;return wp.element.createElement(o.TextControl,{key:u,help:a,label:s,type:"number",value:parseInt(t[l])||n,onChange:e=>c(l,parseInt(e)),min:n,max:r})}if("radio"===r)return wp.element.createElement(o.RadioControl,{key:u,label:s,selected:t[l],onChange:e=>c(l,e),options:[...e.options]});if("range"===r){const n=!!e.allowReset,r=isNaN(e.min)?1:parseInt(e.min),i=isNaN(e.max)?10:parseInt(e.max),p=isNaN(e.step)?1:parseInt(e.step);return wp.element.createElement(o.RangeControl,{key:u,help:a,label:s,value:parseInt(t[l])||r,onChange:e=>c(l,e),allowReset:n,step:p,min:r,max:i})}if(S.includes(r)){const r=e.tag||"p",o=e.placeholder||n.__("Type content…");return wp.element.createElement(O,{key:u,label:s,value:t[l],tag:r,placeholder:o,onChange:e=>c(l,e)})}return"select"===r?wp.element.createElement(o.SelectControl,{key:u,label:s,value:t[l],onChange:e=>c(l,e),options:[{label:n.__("Select…"),value:""},...e.options]}):"taxonomy"===r?wp.element.createElement(E,{key:u,taxonomy:e.taxonomy,label:s,value:t[l],onChange:e=>c(l,e)}):C.includes(r)?wp.element.createElement(o.TextControl,{key:u,type:"text",label:s,value:t[l],onChange:e=>c(l,e)}):"textarea"===r?wp.element.createElement(o.TextareaControl,{key:u,label:s,value:t[l],onChange:e=>c(l,e)}):j.includes(r)?wp.element.createElement(o.ToggleControl,{key:u,help:a,label:s,checked:t[l],onChange:e=>c(l,e?1:0)}):"url"===r?wp.element.createElement(L,{key:u,label:s,value:t[l],disableSuggestions:!0===e.disableSuggestions,onChange:e=>c(l,e)}):void 0}))),s};var P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function A(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T=function(e){return e&&e.Math==Math&&e},I=T("object"==typeof globalThis&&globalThis)||T("object"==typeof window&&window)||T("object"==typeof self&&self)||T("object"==typeof P&&P)||function(){return this}()||Function("return this")(),V={},N=function(e){try{return!!e()}catch(e){return!0}},R=!N((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),M=!N((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),q=M,D=Function.prototype.call,$=q?D.bind(D):function(){return D.apply(D,arguments)},z={},H={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,W=U&&!H.call({1:2},1);z.f=W?function(e){var t=U(this,e);return!!t&&t.enumerable}:H;var G,K,Y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},J=M,X=Function.prototype,Q=X.call,Z=J&&X.bind.bind(Q,Q),ee=function(e){return J?Z(e):function(){return Q.apply(e,arguments)}},te=ee,ne=te({}.toString),re=te("".slice),oe=function(e){return re(ne(e),8,-1)},ae=oe,ie=ee,se=function(e){if("Function"===ae(e))return ie(e)},le=N,ce=oe,ue=Object,pe=se("".split),fe=le((function(){return!ue("z").propertyIsEnumerable(0)}))?function(e){return"String"==ce(e)?pe(e,""):ue(e)}:ue,me=function(e){return null==e},de=me,he=TypeError,ve=function(e){if(de(e))throw he("Can't call method on "+e);return e},be=fe,ge=ve,ye=function(e){return be(ge(e))},_e="object"==typeof document&&document.all,we={all:_e,IS_HTMLDDA:void 0===_e&&void 0!==_e},ke=we.all,xe=we.IS_HTMLDDA?function(e){return"function"==typeof e||e===ke}:function(e){return"function"==typeof e},Ee=xe,Le=we.all,Oe=we.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Ee(e)||e===Le}:function(e){return"object"==typeof e?null!==e:Ee(e)},Fe=I,Se=xe,Ce=function(e){return Se(e)?e:void 0},je=function(e,t){return arguments.length<2?Ce(Fe[e]):Fe[e]&&Fe[e][t]},Be=se({}.isPrototypeOf),Pe=je("navigator","userAgent")||"",Ae=I,Te=Pe,Ie=Ae.process,Ve=Ae.Deno,Ne=Ie&&Ie.versions||Ve&&Ve.version,Re=Ne&&Ne.v8;Re&&(K=(G=Re.split("."))[0]>0&&G[0]<4?1:+(G[0]+G[1])),!K&&Te&&(!(G=Te.match(/Edge\/(\d+)/))||G[1]>=74)&&(G=Te.match(/Chrome\/(\d+)/))&&(K=+G[1]);var Me=K,qe=N,De=!!Object.getOwnPropertySymbols&&!qe((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Me&&Me<41})),$e=De&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ze=je,He=xe,Ue=Be,We=Object,Ge=$e?function(e){return"symbol"==typeof e}:function(e){var t=ze("Symbol");return He(t)&&Ue(t.prototype,We(e))},Ke=String,Ye=xe,Je=function(e){try{return Ke(e)}catch(e){return"Object"}},Xe=TypeError,Qe=function(e){if(Ye(e))return e;throw Xe(Je(e)+" is not a function")},Ze=Qe,et=me,tt=$,nt=xe,rt=Oe,ot=TypeError,at={exports:{}},it=I,st=Object.defineProperty,lt=function(e,t){try{st(it,e,{value:t,configurable:!0,writable:!0})}catch(n){it[e]=t}return t},ct=lt,ut="__core-js_shared__",pt=I[ut]||ct(ut,{}),ft=pt;(at.exports=function(e,t){return ft[e]||(ft[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.5/LICENSE",source:"https://github.com/zloirock/core-js"});var mt=ve,dt=Object,ht=function(e){return dt(mt(e))},vt=se({}.hasOwnProperty),bt=Object.hasOwn||function(e,t){return vt(ht(e),t)},gt=se,yt=0,_t=Math.random(),wt=gt(1..toString),kt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+wt(++yt+_t,36)},xt=I,Et=at.exports,Lt=bt,Ot=kt,Ft=De,St=$e,Ct=Et("wks"),jt=xt.Symbol,Bt=jt&&jt.for,Pt=St?jt:jt&&jt.withoutSetter||Ot,At=$,Tt=Oe,It=Ge,Vt=function(e,t){var n=e[t];return et(n)?void 0:Ze(n)},Nt=function(e,t){var n,r;if("string"===t&&nt(n=e.toString)&&!rt(r=tt(n,e)))return r;if(nt(n=e.valueOf)&&!rt(r=tt(n,e)))return r;if("string"!==t&&nt(n=e.toString)&&!rt(r=tt(n,e)))return r;throw ot("Can't convert object to primitive value")},Rt=TypeError,Mt=function(e){if(!Lt(Ct,e)||!Ft&&"string"!=typeof Ct[e]){var t="Symbol."+e;Ft&&Lt(jt,e)?Ct[e]=jt[e]:Ct[e]=St&&Bt?Bt(t):Pt(t)}return Ct[e]}("toPrimitive"),qt=function(e,t){if(!Tt(e)||It(e))return e;var n,r=Vt(e,Mt);if(r){if(void 0===t&&(t="default"),n=At(r,e,t),!Tt(n)||It(n))return n;throw Rt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Nt(e,t)},Dt=Ge,$t=function(e){var t=qt(e,"string");return Dt(t)?t:t+""},zt=Oe,Ht=I.document,Ut=zt(Ht)&&zt(Ht.createElement),Wt=function(e){return Ut?Ht.createElement(e):{}},Gt=Wt,Kt=!R&&!N((function(){return 7!=Object.defineProperty(Gt("div"),"a",{get:function(){return 7}}).a})),Yt=R,Jt=$,Xt=z,Qt=Y,Zt=ye,en=$t,tn=bt,nn=Kt,rn=Object.getOwnPropertyDescriptor;V.f=Yt?rn:function(e,t){if(e=Zt(e),t=en(t),nn)try{return rn(e,t)}catch(e){}if(tn(e,t))return Qt(!Jt(Xt.f,e,t),e[t])};var on={},an=R&&N((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),sn=Oe,ln=String,cn=TypeError,un=function(e){if(sn(e))return e;throw cn(ln(e)+" is not an object")},pn=R,fn=Kt,mn=an,dn=un,hn=$t,vn=TypeError,bn=Object.defineProperty,gn=Object.getOwnPropertyDescriptor,yn="enumerable",_n="configurable",wn="writable";on.f=pn?mn?function(e,t,n){if(dn(e),t=hn(t),dn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&wn in n&&!n.writable){var r=gn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:_n in n?n.configurable:r.configurable,enumerable:yn in n?n.enumerable:r.enumerable,writable:!1})}return bn(e,t,n)}:bn:function(e,t,n){if(dn(e),t=hn(t),dn(n),fn)try{return bn(e,t,n)}catch(e){}if("get"in n||"set"in n)throw vn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var kn=on,xn=Y,En=R?function(e,t,n){return kn.f(e,t,xn(1,n))}:function(e,t,n){return e[t]=n,e},Ln={exports:{}},On=R,Fn=bt,Sn=Function.prototype,Cn=On&&Object.getOwnPropertyDescriptor,jn=Fn(Sn,"name"),Bn={EXISTS:jn,PROPER:jn&&"something"===function(){}.name,CONFIGURABLE:jn&&(!On||On&&Cn(Sn,"name").configurable)},Pn=xe,An=pt,Tn=se(Function.toString);Pn(An.inspectSource)||(An.inspectSource=function(e){return Tn(e)});var In,Vn,Nn,Rn=An.inspectSource,Mn=xe,qn=I.WeakMap,Dn=Mn(qn)&&/native code/.test(String(qn)),$n=at.exports,zn=kt,Hn=$n("keys"),Un={},Wn=Dn,Gn=I,Kn=Oe,Yn=En,Jn=bt,Xn=pt,Qn=function(e){return Hn[e]||(Hn[e]=zn(e))},Zn=Un,er="Object already initialized",tr=Gn.TypeError,nr=Gn.WeakMap;if(Wn||Xn.state){var rr=Xn.state||(Xn.state=new nr);rr.get=rr.get,rr.has=rr.has,rr.set=rr.set,In=function(e,t){if(rr.has(e))throw tr(er);return t.facade=e,rr.set(e,t),t},Vn=function(e){return rr.get(e)||{}},Nn=function(e){return rr.has(e)}}else{var or=Qn("state");Zn[or]=!0,In=function(e,t){if(Jn(e,or))throw tr(er);return t.facade=e,Yn(e,or,t),t},Vn=function(e){return Jn(e,or)?e[or]:{}},Nn=function(e){return Jn(e,or)}}var ar={set:In,get:Vn,has:Nn,enforce:function(e){return Nn(e)?Vn(e):In(e,{})},getterFor:function(e){return function(t){var n;if(!Kn(t)||(n=Vn(t)).type!==e)throw tr("Incompatible receiver, "+e+" required");return n}}},ir=N,sr=xe,lr=bt,cr=R,ur=Bn.CONFIGURABLE,pr=Rn,fr=ar.enforce,mr=ar.get,dr=Object.defineProperty,hr=cr&&!ir((function(){return 8!==dr((function(){}),"length",{value:8}).length})),vr=String(String).split("String"),br=Ln.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!lr(e,"name")||ur&&e.name!==t)&&(cr?dr(e,"name",{value:t,configurable:!0}):e.name=t),hr&&n&&lr(n,"arity")&&e.length!==n.arity&&dr(e,"length",{value:n.arity});try{n&&lr(n,"constructor")&&n.constructor?cr&&dr(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=fr(e);return lr(r,"source")||(r.source=vr.join("string"==typeof t?t:"")),e};Function.prototype.toString=br((function(){return sr(this)&&mr(this).source||pr(this)}),"toString");var gr=xe,yr=on,_r=Ln.exports,wr=lt,kr={},xr=Math.ceil,Er=Math.floor,Lr=Math.trunc||function(e){var t=+e;return(t>0?Er:xr)(t)},Or=function(e){var t=+e;return t!=t||0===t?0:Lr(t)},Fr=Or,Sr=Math.max,Cr=Math.min,jr=Or,Br=Math.min,Pr=function(e){return e>0?Br(jr(e),9007199254740991):0},Ar=ye,Tr=function(e,t){var n=Fr(e);return n<0?Sr(n+t,0):Cr(n,t)},Ir=function(e){return Pr(e.length)},Vr=function(e){return function(t,n,r){var o,a=Ar(t),i=Ir(a),s=Tr(r,i);if(e&&n!=n){for(;i>s;)if((o=a[s++])!=o)return!0}else for(;i>s;s++)if((e||s in a)&&a[s]===n)return e||s||0;return!e&&-1}},Nr={includes:Vr(!0),indexOf:Vr(!1)},Rr=bt,Mr=ye,qr=Nr.indexOf,Dr=Un,$r=se([].push),zr=function(e,t){var n,r=Mr(e),o=0,a=[];for(n in r)!Rr(Dr,n)&&Rr(r,n)&&$r(a,n);for(;t.length>o;)Rr(r,n=t[o++])&&(~qr(a,n)||$r(a,n));return a},Hr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");kr.f=Object.getOwnPropertyNames||function(e){return zr(e,Hr)};var Ur={};Ur.f=Object.getOwnPropertySymbols;var Wr,Gr,Kr,Yr,Jr=je,Xr=kr,Qr=Ur,Zr=un,eo=se([].concat),to=Jr("Reflect","ownKeys")||function(e){var t=Xr.f(Zr(e)),n=Qr.f;return n?eo(t,n(e)):t},no=bt,ro=to,oo=V,ao=on,io=N,so=xe,lo=/#|\.prototype\./,co=function(e,t){var n=po[uo(e)];return n==mo||n!=fo&&(so(t)?io(t):!!t)},uo=co.normalize=function(e){return String(e).replace(lo,".").toLowerCase()},po=co.data={},fo=co.NATIVE="N",mo=co.POLYFILL="P",ho=co,vo=I,bo=V.f,go=En,yo=function(e,t,n,r){r||(r={});var o=r.enumerable,a=void 0!==r.name?r.name:t;if(gr(n)&&_r(n,a,r),r.global)o?e[t]=n:wr(t,n);else{try{r.unsafe?e[t]&&(o=!0):delete e[t]}catch(e){}o?e[t]=n:yr.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e},_o=lt,wo=function(e,t,n){for(var r=ro(t),o=ao.f,a=oo.f,i=0;i<r.length;i++){var s=r[i];no(e,s)||n&&no(n,s)||o(e,s,a(t,s))}},ko=ho,xo=function(e,t){var n,r,o,a,i,s=e.target,l=e.global,c=e.stat;if(n=l?vo:c?vo[s]||_o(s,{}):(vo[s]||{}).prototype)for(r in t){if(a=t[r],o=e.dontCallGetSet?(i=bo(n,r))&&i.value:n[r],!ko(l?r:s+(c?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;wo(a,o)}(e.sham||o&&o.sham)&&go(a,"sham",!0),yo(n,r,a,e)}},Eo=M,Lo=Function.prototype,Oo=Lo.apply,Fo=Lo.call,So="object"==typeof Reflect&&Reflect.apply||(Eo?Fo.bind(Oo):function(){return Fo.apply(Oo,arguments)}),Co=Qe,jo=M,Bo=se(se.bind),Po=je("document","documentElement"),Ao=se([].slice),To=TypeError,Io=/(?:ipad|iphone|ipod).*applewebkit/i.test(Pe),Vo="process"==oe(I.process),No=I,Ro=So,Mo=function(e,t){return Co(e),void 0===t?e:jo?Bo(e,t):function(){return e.apply(t,arguments)}},qo=xe,Do=bt,$o=N,zo=Po,Ho=Ao,Uo=Wt,Wo=function(e,t){if(e<t)throw To("Not enough arguments");return e},Go=Io,Ko=Vo,Yo=No.setImmediate,Jo=No.clearImmediate,Xo=No.process,Qo=No.Dispatch,Zo=No.Function,ea=No.MessageChannel,ta=No.String,na=0,ra={},oa="onreadystatechange";try{Wr=No.location}catch(e){}var aa=function(e){if(Do(ra,e)){var t=ra[e];delete ra[e],t()}},ia=function(e){return function(){aa(e)}},sa=function(e){aa(e.data)},la=function(e){No.postMessage(ta(e),Wr.protocol+"//"+Wr.host)};Yo&&Jo||(Yo=function(e){Wo(arguments.length,1);var t=qo(e)?e:Zo(e),n=Ho(arguments,1);return ra[++na]=function(){Ro(t,void 0,n)},Gr(na),na},Jo=function(e){delete ra[e]},Ko?Gr=function(e){Xo.nextTick(ia(e))}:Qo&&Qo.now?Gr=function(e){Qo.now(ia(e))}:ea&&!Go?(Yr=(Kr=new ea).port2,Kr.port1.onmessage=sa,Gr=Mo(Yr.postMessage,Yr)):No.addEventListener&&qo(No.postMessage)&&!No.importScripts&&Wr&&"file:"!==Wr.protocol&&!$o(la)?(Gr=la,No.addEventListener("message",sa,!1)):Gr=oa in Uo("script")?function(e){zo.appendChild(Uo("script")).onreadystatechange=function(){zo.removeChild(this),aa(e)}}:function(e){setTimeout(ia(e),0)});var ca={set:Yo,clear:Jo},ua=ca.clear;xo({global:!0,bind:!0,enumerable:!0,forced:I.clearImmediate!==ua},{clearImmediate:ua});var pa=ca.set;xo({global:!0,bind:!0,enumerable:!0,forced:I.setImmediate!==pa},{setImmediate:pa});var fa={exports:{}};!function(e,t){var n;"undefined"!=typeof self&&self,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){},function(e,t,n){var r=Array.prototype,o=Object.prototype,a={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},i=/[&"'<>]/g;function s(e,t){return o.hasOwnProperty.call(e,t)}function l(e){return a[e]}function c(e,t,n){var r,o,a;if(e instanceof Error&&(e=(o=e).name+": "+o.message),Object.setPrototypeOf?(r=new Error(e),Object.setPrototypeOf(r,c.prototype)):(r=this,Object.defineProperty(r,"message",{enumerable:!1,writable:!0,value:e})),Object.defineProperty(r,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),o){var i=Object.getOwnPropertyDescriptor(o,"stack");(a=i&&(i.get||function(){return i.value}))||(a=function(){return o.stack})}else{var s=new Error(e).stack;a=function(){return s}}return Object.defineProperty(r,"stack",{get:function(){return a.call(r)}}),Object.defineProperty(r,"cause",{value:o}),r.lineno=t,r.colno=n,r.firstUpdate=!0,r.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},r}function u(e){return"[object Function]"===o.toString.call(e)}function p(e){return"[object Array]"===o.toString.call(e)}function f(e){return"[object String]"===o.toString.call(e)}function m(e){return"[object Object]"===o.toString.call(e)}function d(e){return Array.prototype.slice.call(e)}function h(e,t,n){return Array.prototype.indexOf.call(e||[],t,n)}function v(e){var t=[];for(var n in e)s(e,n)&&t.push(n);return t}(t=e.exports={}).hasOwnProp=s,t._prettifyError=function(e,n,r){if(r.Update||(r=new t.TemplateError(r)),r.Update(e),!n){var o=r;(r=new Error(o.message)).name=o.name}return r},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),t.TemplateError=c,t.escape=function(e){return e.replace(i,l)},t.isFunction=u,t.isArray=p,t.isString=f,t.isObject=m,t.groupBy=function(e,t){for(var n={},r=u(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var a=e[o],i=r(a,o);(n[i]||(n[i]=[])).push(a)}return n},t.toArray=d,t.without=function(e){var t=[];if(!e)return t;for(var n=e.length,r=d(arguments).slice(1),o=-1;++o<n;)-1===h(r,e[o])&&t.push(e[o]);return t},t.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},t.each=function(e,t,n){if(null!=e)if(r.forEach&&e.forEach===r.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var o=0,a=e.length;o<a;o++)t.call(n,e[o],o,e)},t.map=function(e,t){var n=[];if(null==e)return n;if(r.map&&e.map===r.map)return e.map(t);for(var o=0;o<e.length;o++)n[n.length]=t(e[o],o);return e.length===+e.length&&(n.length=e.length),n},t.asyncIter=function(e,t,n){var r=-1;!function o(){++r<e.length?t(e[r],r,o,n):n()}()},t.asyncFor=function(e,t,n){var r=v(e||{}),o=r.length,a=-1;!function i(){a++;var s=r[a];a<o?t(s,e[s],a,o,i):n()}()},t.indexOf=h,t.keys=v,t._entries=function(e){return v(e).map((function(t){return[t,e[t]]}))},t._values=function(e){return v(e).map((function(t){return e[t]}))},t._assign=t.extend=function(e,t){return e=e||{},v(t).forEach((function(n){e[n]=t[n]})),e},t.inOperator=function(e,t){if(p(t)||f(t))return-1!==t.indexOf(e);if(m(t))return e in t;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}},function(e,t,n){var r=n(1),o=Array.from,a="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof o,i=function(){function e(e,t){this.variables={},this.parent=e,this.topLevel=!1,this.isolateWrites=t}var t=e.prototype;return t.set=function(e,t,n){var r=e.split("."),o=this.variables,a=this;if(n&&(a=this.resolve(r[0],!0)))a.set(e,t);else{for(var i=0;i<r.length-1;i++){var s=r[i];o[s]||(o[s]={}),o=o[s]}o[r[r.length-1]]=t}},t.get=function(e){var t=this.variables[e];return void 0!==t?t:null},t.lookup=function(e){var t=this.parent,n=this.variables[e];return void 0!==n?n:t&&t.lookup(e)},t.resolve=function(e,t){var n=t&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[e]?this:n&&n.resolve(e)},t.push=function(t){return new e(this,t)},t.pop=function(){return this.parent},e}();function s(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}function l(e){var t=e.length;if(t){var n=e[t-1];if(s(n))return n}return{}}function c(e){var t=e.length;return 0===t?0:s(e[t-1])?t-1:t}function u(e){if("string"!=typeof e)return e;this.val=e,this.length=e.length}u.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),u.prototype.valueOf=function(){return this.val},u.prototype.toString=function(){return this.val},e.exports={Frame:i,makeMacro:function(e,t,n){var r=this;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];var s,u=c(a),p=l(a);if(u>e.length)s=a.slice(0,e.length),a.slice(s.length,u).forEach((function(e,n){n<t.length&&(p[t[n]]=e)})),s.push(p);else if(u<e.length){s=a.slice(0,u);for(var f=u;f<e.length;f++){var m=e[f];s.push(p[m]),delete p[m]}s.push(p)}else s=a;return n.apply(r,s)}},makeKeywordArgs:function(e){return e.__keywords=!0,e},numArgs:c,suppressValue:function(e,t){return e=null!=e?e:"",!t||e instanceof u||(e=r.escape(e.toString())),e},ensureDefined:function(e,t,n){if(null==e)throw new r.TemplateError("attempted to output null or undefined value",t+1,n+1);return e},memberLookup:function(e,t){if(null!=e)return"function"==typeof e[t]?function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e[t].apply(e,r)}:e[t]},contextOrFrameLookup:function(e,t,n){var r=t.lookup(n);return void 0!==r?r:e.lookup(n)},callWrap:function(e,t,n,r){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(n,r)},handleError:function(e,t,n){return e.lineno?e:new r.TemplateError(e,t,n)},isArray:r.isArray,keys:r.keys,SafeString:u,copySafeness:function(e,t){return e instanceof u?new u(t):t.toString()},markSafe:function(e){var t=typeof e;return"string"===t?new u(e):"function"!==t?e:function(t){var n=e.apply(this,arguments);return"string"==typeof n?new u(n):n}},asyncEach:function(e,t,n,o){if(r.isArray(e)){var a=e.length;r.asyncIter(e,(function(e,r,o){switch(t){case 1:n(e,r,a,o);break;case 2:n(e[0],e[1],r,a,o);break;case 3:n(e[0],e[1],e[2],r,a,o);break;default:e.push(r,a,o),n.apply(this,e)}}),o)}else r.asyncFor(e,(function(e,t,r,o,a){n(e,t,r,o,a)}),o)},asyncAll:function(e,t,n,o){var a,i,s=0;function l(e,t){s++,i[e]=t,s===a&&o(null,i.join(""))}if(r.isArray(e))if(a=e.length,i=new Array(a),0===a)o(null,"");else for(var c=0;c<e.length;c++){var u=e[c];switch(t){case 1:n(u,c,a,l);break;case 2:n(u[0],u[1],c,a,l);break;case 3:n(u[0],u[1],u[2],c,a,l);break;default:u.push(c,a,l),n.apply(this,u)}}else{var p=r.keys(e||{});if(a=p.length,i=new Array(a),0===a)o(null,"");else for(var f=0;f<p.length;f++){var m=p[f];n(m,e[m],f,a,l)}}},inOperator:r.inOperator,fromIterator:function(e){return"object"!=typeof e||null===e||r.isArray(e)?e:a&&Symbol.iterator in e?o(e):e}}},function(e,t,n){var r=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).precompiled=t||{},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getSource=function(e){return this.precompiled[e]?{src:{type:"code",obj:this.precompiled[e]},path:e}:null},r}(n(4));e.exports={PrecompiledLoader:r}},function(e,t,n){var r=n(0),o=n(5).EmitterObj;e.exports=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=o.prototype;return a.resolve=function(e,t){return r.resolve(r.dirname(e),t)},a.isRelative=function(e){return 0===e.indexOf("./")||0===e.indexOf("../")},o}(o)},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var i=n(13),s=n(1);function l(e,t,n){n=n||{},s.keys(n).forEach((function(t){var r,o;n[t]=(r=e.prototype[t],o=n[t],"function"!=typeof r||"function"!=typeof o?o:function(){var e=this.parent;this.parent=r;var t=o.apply(this,arguments);return this.parent=e,t})}));var r=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),o(n,[{key:"typename",get:function(){return t}}]),n}(e);return s._assign(r.prototype,n),r}var c=function(){function e(){this.init.apply(this,arguments)}return e.prototype.init=function(){},e.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),l(this,e,t)},o(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(),u=function(e){function t(){var t,n;return(t=n=e.call(this)||this).init.apply(t,arguments),n}return a(t,e),t.prototype.init=function(){},t.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),l(this,e,t)},o(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(i);e.exports={Obj:c,EmitterObj:u}},function(e,t,n){var r,o=n(1),a=n(7),i=a.Environment,s=a.Template,l=n(4),c=n(3),u=n(0),p=n(0),f=n(0),m=n(0),d=n(2),h=n(0),v=n(17);function b(e,t){var n;return t=t||{},o.isObject(e)&&(t=e,e=null),c.FileSystemLoader?n=new c.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):c.WebLoader&&(n=new c.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),r=new i(n,t),t&&t.express&&r.express(t.express),r}e.exports={Environment:i,Template:s,Loader:l,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:p,parser:f,lexer:m,runtime:d,lib:o,nodes:h,installJinjaCompat:v,configure:b,reset:function(){r=void 0},compile:function(e,t,n,o){return r||b(),new s(e,t,n,o)},render:function(e,t,n){return r||b(),r.render(e,t,n)},renderString:function(e,t,n){return r||b(),r.renderString(e,t,n)},precompile:u?u.precompile:void 0,precompileString:u?u.precompileString:void 0}},function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var o=n(8),a=n(11),i=n(1),s=n(0),l=n(12),c=n(3),u=c.FileSystemLoader,p=c.WebLoader,f=c.PrecompiledLoader,m=n(14),d=n(15),h=n(5),v=h.Obj,b=h.EmitterObj,g=n(2),y=g.handleError,_=g.Frame,w=n(16);function k(e,t,n){o((function(){e(t,n)}))}var x={type:"code",obj:{root:function(e,t,n,r,o){try{o(null,"")}catch(e){o(y(e,null,null))}}}},E=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t){var n=this;t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null==t.autoescape||t.autoescape,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=i.isArray(e)?e:[e]:u?this.loaders=[new u("views")]:p&&(this.loaders=[new p("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new f(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=d(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],i._entries(l).forEach((function(e){var t=e[0],r=e[1];return n.addFilter(t,r)})),i._entries(m).forEach((function(e){var t=e[0],r=e[1];return n.addTest(t,r)}))},n._initLoaders=function(){var e=this;this.loaders.forEach((function(t){t.cache={},"function"==typeof t.on&&(t.on("update",(function(n,r){t.cache[n]=null,e.emit("update",n,r,t)})),t.on("load",(function(n,r){e.emit("load",n,r,t)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(e){e.cache={}}))},n.addExtension=function(e,t){return t.__name=e,this.extensions[e]=t,this.extensionsList.push(t),this},n.removeExtension=function(e){var t=this.getExtension(e);t&&(this.extensionsList=i.without(this.extensionsList,t),delete this.extensions[e])},n.getExtension=function(e){return this.extensions[e]},n.hasExtension=function(e){return!!this.extensions[e]},n.addGlobal=function(e,t){return this.globals[e]=t,this},n.getGlobal=function(e){if(void 0===this.globals[e])throw new Error("global not found: "+e);return this.globals[e]},n.addFilter=function(e,t,n){var r=t;return n&&this.asyncFilters.push(e),this.filters[e]=r,this},n.getFilter=function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},n.addTest=function(e,t){return this.tests[e]=t,this},n.getTest=function(e){if(!this.tests[e])throw new Error("test not found: "+e);return this.tests[e]},n.resolveTemplate=function(e,t,n){return e.isRelative&&t&&e.isRelative(n)&&e.resolve?e.resolve(t,n):n},n.getTemplate=function(e,t,n,r,o){var a,s=this,l=this,c=null;if(e&&e.raw&&(e=e.raw),i.isFunction(n)&&(o=n,n=null,t=t||!1),i.isFunction(t)&&(o=t,t=!1),e instanceof O)c=e;else{if("string"!=typeof e)throw new Error("template names must be a string: "+e);for(var u=0;u<this.loaders.length;u++){var p=this.loaders[u];if(c=p.cache[this.resolveTemplate(p,n,e)])break}}return c?(t&&c.compile(),o?void o(null,c):c):(i.asyncIter(this.loaders,(function(t,r,o,a){function i(e,n){e?a(e):n?(n.loader=t,a(null,n)):o()}e=l.resolveTemplate(t,n,e),t.async?t.getSource(e,i):i(null,t.getSource(e))}),(function(n,i){if(i||n||r||(n=new Error("template not found: "+e)),n){if(o)return void o(n);throw n}var l;i?(l=new O(i.src,s,i.path,t),i.noCache||(i.loader.cache[e]=l)):l=new O(x,s,"",t),o?o(null,l):a=l})),a)},n.express=function(e){return w(this,e)},n.render=function(e,t,n){i.isFunction(t)&&(n=t,t=null);var r=null;return this.getTemplate(e,(function(e,o){if(e&&n)k(n,e);else{if(e)throw e;r=o.render(t,n)}})),r},n.renderString=function(e,t,n,r){return i.isFunction(n)&&(r=n,n={}),new O(e,this,(n=n||{}).path).render(t,r)},n.waterfall=function(e,t,n){return a(e,t,n)},t}(b),L=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t,n){var r=this;this.env=n||new E,this.ctx=i.extend({},e),this.blocks={},this.exported=[],i.keys(t).forEach((function(e){r.addBlock(e,t[e])}))},n.lookup=function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},n.setVariable=function(e,t){this.ctx[e]=t},n.getVariables=function(){return this.ctx},n.addBlock=function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},n.getBlock=function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},n.getSuper=function(e,t,n,r,o,a){var s=i.indexOf(this.blocks[t]||[],n),l=this.blocks[t][s+1];if(-1===s||!l)throw new Error('no super block available for "'+t+'"');l(e,this,r,o,a)},n.addExport=function(e){this.exported.push(e)},n.getExported=function(){var e=this,t={};return this.exported.forEach((function(n){t[n]=e.ctx[n]})),t},t}(v),O=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.init=function(e,t,n,r){if(this.env=t||new E,i.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj;break;default:throw new Error("Unexpected template object type "+e.type+"; expected 'code', or 'string'")}else{if(!i.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}if(this.path=n,r)try{this._compile()}catch(e){throw i._prettifyError(this.path,this.env.opts.dev,e)}else this.compiled=!1},n.render=function(e,t,n){var r=this;"function"==typeof e?(n=e,e={}):"function"==typeof t&&(n=t,t=null);var o=!t;try{this.compile()}catch(e){var a=i._prettifyError(this.path,this.env.opts.dev,e);if(n)return k(n,a);throw a}var s=new L(e||{},this.blocks,this.env),l=t?t.push(!0):new _;l.topLevel=!0;var c=null,u=!1;return this.rootRenderFunc(this.env,s,l,g,(function(e,t){if(u){if(n)return;throw e}if(e&&(e=i._prettifyError(r.path,r.env.opts.dev,e),u=!0),n)o?k(n,e,t):n(e,t);else{if(e)throw e;c=t}})),c},n.getExported=function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(e){if(n)return n(e);throw e}var r=t?t.push():new _;r.topLevel=!0;var o=new L(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,o,r,g,(function(e){e?n(e,null):n(null,o.getExported())}))},n.compile=function(){this.compiled||this._compile()},n._compile=function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=s.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);e=new Function(t)()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},n._getBlocks=function(e){var t={};return i.keys(e).forEach((function(n){"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n])})),t},t}(v);e.exports={Environment:E,Template:O}},function(e,t,n){var r=n(9),o=[],a=[],i=r.makeRequestCallFromTimer((function(){if(a.length)throw a.shift()}));function s(e){var t;(t=o.length?o.pop():new l).task=e,r(t)}function l(){this.task=null}e.exports=s,l.prototype.call=function(){try{this.task.call()}catch(e){s.onerror?s.onerror(e):(a.push(e),i())}finally{this.task=null,o[o.length]=this}}},function(e,t,n){(function(t){function n(e){o.length||r(),o[o.length]=e}e.exports=n;var r,o=[],a=0;function i(){for(;a<o.length;){var e=a;if(a+=1,o[e].call(),a>1024){for(var t=0,n=o.length-a;t<n;t++)o[t]=o[t+a];o.length-=a,a=0}}o.length=0,a=0}var s,l,c,u=void 0!==t?t:self,p=u.MutationObserver||u.WebKitMutationObserver;function f(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof p?(s=1,l=new p(i),c=document.createTextNode(""),l.observe(c,{characterData:!0}),r=function(){s=-s,c.data=s}):r=f(i),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(t,n(10))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r,o,a,i,s;o=function(){var e=Array.prototype.slice.call(arguments);"function"==typeof e[0]&&e[0].apply(null,e.splice(1))},a=function(e){"function"==typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=function(e,t,n){var r=n?a:o;if(t=t||function(){},!i(e)){var s=new Error("First argument to waterfall must be an array of functions");return t(s)}if(!e.length)return t();var l=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var o=Array.prototype.slice.call(arguments,1),a=e.next();a?o.push(l(a)):o.push(t),r((function(){e.apply(null,o)}))}}};l(function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)}(e))()},void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r=n(1),o=n(2);function a(e,t){return null==e||!1===e?t:e}function i(e){return e!=e}function s(e){var t=(e=a(e,"")).toLowerCase();return o.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}function l(e){if(r.isString(e))return e.split("");if(r.isObject(e))return r._entries(e||{}).map((function(e){return{key:e[0],value:e[1]}}));if(r.isArray(e))return e;throw new r.TemplateError("list filter: type not iterable")}function c(e){return o.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}(t=e.exports={}).abs=Math.abs,t.batch=function(e,t,n){var r,o=[],a=[];for(r=0;r<e.length;r++)r%t==0&&a.length&&(o.push(a),a=[]),a.push(e[r]);if(a.length){if(n)for(r=a.length;r<t;r++)a.push(n);o.push(a)}return o},t.capitalize=s,t.center=function(e,t){if(t=t||80,(e=a(e,"")).length>=t)return e;var n=t-e.length,i=r.repeat(" ",n/2-n%2),s=r.repeat(" ",n/2);return o.copySafeness(e,i+e+s)},t.default=function(e,t,n){return n?e||t:void 0!==e?e:t},t.dictsort=function(e,t,n){if(!r.isObject(e))throw new r.TemplateError("dictsort filter: val must be an object");var o,a=[];for(var i in e)a.push([i,e[i]]);if(void 0===n||"key"===n)o=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return a.sort((function(e,n){var a=e[o],i=n[o];return t||(r.isString(a)&&(a=a.toUpperCase()),r.isString(i)&&(i=i.toUpperCase())),a>i?1:a===i?0:-1})),a},t.dump=function(e,t){return JSON.stringify(e,null,t)},t.escape=function(e){return e instanceof o.SafeString?e:(e=null==e?"":e,o.markSafe(r.escape(e.toString())))},t.safe=function(e){return e instanceof o.SafeString?e:(e=null==e?"":e,o.markSafe(e.toString()))},t.first=function(e){return e[0]},t.forceescape=function(e){return e=null==e?"":e,o.markSafe(r.escape(e.toString()))},t.groupby=function(e,t){return r.groupBy(e,t)},t.indent=function(e,t,n){if(""===(e=a(e,"")))return"";t=t||4;var i=e.split("\n"),s=r.repeat(" ",t),l=i.map((function(e,t){return 0!==t||n?""+s+e+"\n":e+"\n"})).join("");return o.copySafeness(e,l)},t.join=function(e,t,n){return t=t||"",n&&(e=r.map(e,(function(e){return e[n]}))),e.join(t)},t.last=function(e){return e[e.length-1]},t.length=function(e){var t=a(e,"");return void 0!==t?"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set?t.size:!r.isObject(t)||t instanceof o.SafeString?t.length:r.keys(t).length:0},t.list=l,t.lower=function(e){return(e=a(e,"")).toLowerCase()},t.nl2br=function(e){return null==e?"":o.copySafeness(e,e.replace(/\r\n|\n/g,"<br />\n"))},t.random=function(e){return e[Math.floor(Math.random()*e.length)]},t.rejectattr=function(e,t){return e.filter((function(e){return!e[t]}))},t.selectattr=function(e,t){return e.filter((function(e){return!!e[t]}))},t.replace=function(e,t,n,r){var a=e;if(t instanceof RegExp)return e.replace(t,n);void 0===r&&(r=-1);var i="";if("number"==typeof t)t=""+t;else if("string"!=typeof t)return e;if("number"==typeof e&&(e=""+e),"string"!=typeof e&&!(e instanceof o.SafeString))return e;if(""===t)return i=n+e.split("").join(n)+n,o.copySafeness(e,i);var s=e.indexOf(t);if(0===r||-1===s)return e;for(var l=0,c=0;s>-1&&(-1===r||c<r);)i+=e.substring(l,s)+n,l=s+t.length,c++,s=e.indexOf(t,l);return l<e.length&&(i+=e.substring(l)),o.copySafeness(a,i)},t.reverse=function(e){var t;return(t=r.isString(e)?l(e):r.map(e,(function(e){return e}))).reverse(),r.isString(e)?o.copySafeness(e,t.join("")):t},t.round=function(e,t,n){t=t||0;var r=Math.pow(10,t);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(e*r)/r},t.slice=function(e,t,n){for(var r=Math.floor(e.length/t),o=e.length%t,a=[],i=0,s=0;s<t;s++){var l=i+s*r;s<o&&i++;var c=i+(s+1)*r,u=e.slice(l,c);n&&s>=o&&u.push(n),a.push(u)}return a},t.sum=function(e,t,n){return void 0===n&&(n=0),t&&(e=r.map(e,(function(e){return e[t]}))),n+e.reduce((function(e,t){return e+t}),0)},t.sort=o.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(e,t,n,o){var a=r.map(e,(function(e){return e}));return a.sort((function(e,a){var i=o?e[o]:e,s=o?a[o]:a;return!n&&r.isString(i)&&r.isString(s)&&(i=i.toLowerCase(),s=s.toLowerCase()),i<s?t?1:-1:i>s?t?-1:1:0})),a})),t.string=function(e){return o.copySafeness(e,e)},t.striptags=function(e,t){var n=c((e=a(e,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,"")),r="";return r=t?n.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):n.replace(/\s+/gi," "),o.copySafeness(e,r)},t.title=function(e){var t=(e=a(e,"")).split(" ").map((function(e){return s(e)}));return o.copySafeness(e,t.join(" "))},t.trim=c,t.truncate=function(e,t,n,r){var i=e;if(t=t||255,(e=a(e,"")).length<=t)return e;if(n)e=e.substring(0,t);else{var s=e.lastIndexOf(" ",t);-1===s&&(s=t),e=e.substring(0,s)}return e+=null!=r?r:"...",o.copySafeness(i,e)},t.upper=function(e){return(e=a(e,"")).toUpperCase()},t.urlencode=function(e){var t=encodeURIComponent;return r.isString(e)?t(e):(r.isArray(e)?e:r._entries(e)).map((function(e){var n=e[0],r=e[1];return t(n)+"="+t(r)})).join("&")};var u=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,p=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,f=/^https?:\/\/.*$/,m=/^www\./,d=/\.(?:org|net|com)(?:\:|\/|$)/;t.urlize=function(e,t,n){i(t)&&(t=1/0);var r=!0===n?' rel="nofollow"':"";return e.split(/(\s+)/).filter((function(e){return e&&e.length})).map((function(e){var n=e.match(u),o=n?n[1]:e,a=o.substr(0,t);return f.test(o)?'<a href="'+o+'"'+r+">"+a+"</a>":m.test(o)?'<a href="http://'+o+'"'+r+">"+a+"</a>":p.test(o)?'<a href="mailto:'+o+'">'+o+"</a>":d.test(o)?'<a href="http://'+o+'"'+r+">"+a+"</a>":e})).join("")},t.wordcount=function(e){var t=(e=a(e,""))?e.match(/\w+/g):null;return t?t.length:null},t.float=function(e,t){var n=parseFloat(e);return i(n)?t:n},t.int=function(e,t){var n=parseInt(e,10);return i(n)?t:n},t.d=t.default,t.e=t.escape},function(e,t,n){var r,o="object"==typeof Reflect?Reflect:null,a=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var o,a,i,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),i=a[t]),void 0===i)i=a[t]=n,++e._eventsCount;else if("function"==typeof i?i=a[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(o=c(e))>0&&i.length>o&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,s=l,console&&console.warn&&console.warn(s)}return e}function p(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,a(this.listener,this.target,e))}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=p.bind(r);return o.listener=n,r.wrapFn=o,o}function m(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var c=l.length,u=h(l,c);for(n=0;n<c;++n)a(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,o,a,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(o=a[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return m(this,e,!0)},s.prototype.rawListeners=function(e){return m(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){var r=n(2).SafeString;t.callable=function(e){return"function"==typeof e},t.defined=function(e){return void 0!==e},t.divisibleby=function(e,t){return e%t==0},t.escaped=function(e){return e instanceof r},t.equalto=function(e,t){return e===t},t.eq=t.equalto,t.sameas=t.equalto,t.even=function(e){return e%2==0},t.falsy=function(e){return!e},t.ge=function(e,t){return e>=t},t.greaterthan=function(e,t){return e>t},t.gt=t.greaterthan,t.le=function(e,t){return e<=t},t.lessthan=function(e,t){return e<t},t.lt=t.lessthan,t.lower=function(e){return e.toLowerCase()===e},t.ne=function(e,t){return e!==t},t.null=function(e){return null===e},t.number=function(e){return"number"==typeof e},t.odd=function(e){return e%2==1},t.string=function(e){return"string"==typeof e},t.truthy=function(e){return!!e},t.undefined=function(e){return void 0===e},t.upper=function(e){return e.toUpperCase()===e},t.iterable=function(e){return"undefined"!=typeof Symbol?!!e[Symbol.iterator]:Array.isArray(e)||"string"==typeof e},t.mapping=function(e){var t=null!=e&&"object"==typeof e&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}},function(e,t,n){function r(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return++t>=e.length&&(t=0),this.current=e[t],this.current}}}e.exports=function(){return{range:function(e,t,n){void 0===t?(t=e,e=0,n=1):n||(n=1);var r=[];if(n>0)for(var o=e;o<t;o+=n)r.push(o);else for(var a=e;a>t;a+=n)r.push(a);return r},cycler:function(){return r(Array.prototype.slice.call(arguments))},joiner:function(e){return function(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}(e)}}}},function(e,t,n){var r=n(0);e.exports=function(e,t){function n(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=r.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(t,n){e.render(this.name,t,n)},t.set("view",n),t.set("nunjucksEnv",e),e}},function(e,t,n){e.exports=function(){var e=this.runtime,t=this.lib,n=this.compiler.Compiler,r=this.parser.Parser;this.nodes,this.lexer;var o,a,i=e.contextOrFrameLookup,s=e.memberLookup;function l(t,n,r,o){t=t||[],null===n&&(n=o<0?t.length-1:0),null===r?r=o<0?-1:t.length:r<0&&(r+=t.length),n<0&&(n+=t.length);for(var a=[],i=n;!(i<0||i>t.length||o>0&&i>=r||o<0&&i<=r);i+=o)a.push(e.memberLookup(t,i));return a}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n&&(o=n.prototype.assertType),r&&(a=r.prototype.parseAggregate),e.contextOrFrameLookup=function(e,t,n){var r=i.apply(this,arguments);if(void 0!==r)return r;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}};var u={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||e<0)throw new Error("KeyError");return this.splice(e,1)},append:function(e){return this.push(e)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if(-1===(t=this.indexOf(e)))throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},p={items:function(){return t._entries(this)},values:function(){return t._values(this)},keys:function(){return t.keys(this)},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return c(this,e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw new Error("KeyError");delete this[e]}return n},popitem:function(){var e=t.keys(this);if(!e.length)throw new Error("KeyError");var n=e[0],r=this[n];return delete this[n],[n,r]},setdefault:function(e,t){return void 0===t&&(t=null),e in this||(this[e]=t),this[e]},update:function(e){return t._assign(this,e),null}};return p.iteritems=p.items,p.itervalues=p.values,p.iterkeys=p.keys,e.memberLookup=function(e,n,r){return 4===arguments.length?l.apply(this,arguments):(e=e||{},t.isArray(e)&&c(u,n)?u[n].bind(e):t.isObject(e)&&c(p,n)?p[n].bind(e):s.apply(this,arguments))},function(){e.contextOrFrameLookup=i,e.memberLookup=s,n&&(n.prototype.assertType=o),r&&(r.prototype.parseAggregate=a)}}}])},e.exports=n()}(fa);var ma=A(fa.exports);var da=function(){this.tags=["spaceless"],this.parse=function(e,t,n){var r=e.nextToken(),o=e.parseSignature(null,!0);e.advanceAfterBlockEnd(r.value);var a=e.parseUntilBlocks("error","endspaceless"),i=null;return e.skipSymbol("error")&&(e.skip(n.TOKEN_BLOCK_END),i=e.parseUntilBlocks("endremote")),e.advanceAfterBlockEnd(),new t.CallExtension(this,"run",o,[a,i])},this.run=function(e,t){return t().replace(/\s+/g," ").replace(/>\s</g,"><")}};const ha={},va=e=>{const[n,r]=t.useState(null),[o,a]=t.useState(!1);if(!1===e.isRenderable)return[n,!1];const i="render"in e.attributes,s={...e.attributes,...e.transient||{}};delete s.ver,delete s.mode,delete s.render;const l=v([e.name,s]),c=async()=>{if(ha.hasOwnProperty(l))return void r(ha[l]);let t=null;i&&(t=((e,t)=>{try{const n=(()=>{if(!window.vfNunjucks){const e=new ma.Environment(null,{lstripBlocks:!0,trimBlocks:!0,autoescape:!1});e.addExtension("spaceless",new da),window.vfNunjucks=e}return window.vfNunjucks})().render(e.replace(/^vf\//,"vf-"),t);return{html:n,hash:v(n)}}catch(e){return console.log(e),null}})(e.name,s),ha[l]=t,r(t))};return t.useEffect((()=>{c()}),[l,e.isEditing]),n&&i&&e.setAttributes({render:n.html}),[n,o]},ba=e=>{let{onClick:t}=e;return wp.element.createElement(o.Button,{label:n.__("Edit"),icon:"edit",onClick:t})},ga=e=>{let{onClick:t}=e;return wp.element.createElement(o.Button,{label:n.__("Preview"),icon:"visibility",onClick:t})},ya=e=>{const{isEditing:t,onToggle:n}=e;return wp.element.createElement(r.BlockControls,null,wp.element.createElement(o.Toolbar,null,t?wp.element.createElement(ga,{onClick:n}):wp.element.createElement(ba,{onClick:n})))},_a=e=>{let{onClick:t}=e;return wp.element.createElement(o.Button,{isSecondary:!0,onClick:t},n.__("Preview"))},wa=e=>{const{onToggle:t}=e;return wp.element.createElement("div",{className:"vf-block__edit"},e.children,t&&wp.element.createElement(_a,{onClick:t}))},ka=e=>{let{render:n,uniqueId:r,onHeight:o}=e;const{renderPrefix:a,renderSuffix:i}=u(),s=`vfwp_${r}`,l=n.html?`${a}${n.html}${i}`:"";let c=document.getElementById(s);c||(c=document.createElement("iframe"),c.id=s,c.className="vf-block__iframe",c.setAttribute("scrolling","no"),n.src&&(c.src=n.src));const p=t.useRef(),{onLoad:f,onUnload:m}=((e,t,n)=>{const r=t=>{let{data:r}=t;r===Object(r)&&r.id===e.id&&window.requestAnimationFrame((()=>{n(r.height)}))};return{onLoad:()=>{e.vfActive||window.addEventListener("message",r),e.vfActive=!0;const n=e.contentWindow.document.body;t&&(n.innerHTML=t);const o=document.createElement("script");o.type="text/javascript",o.innerHTML=`\nif (ResizeObserver) {\n  const observer = new ResizeObserver(entries => {\n    entries.forEach(entry => {\n      window.parent.postMessage({\n          id: '${e.id}',\n          height: entry.contentRect.height\n        }, '*'\n      );\n    });\n  });\n  observer.observe(document.body);\n} else {\n  const vfResize = () => {\n    window.parent.postMessage({\n        id: '${e.id}',\n        height: document.documentElement.scrollHeight\n      }, '*'\n    );\n  };\n  window.addEventListener('resize', vfResize);\n  setTimeout(vfResize, 100);\n  vfResize();\n}\n    `,n.appendChild(o)},onUnload:()=>{window.removeEventListener("message",r),e.vfActive=!1}}})(c,l,o);return t.useEffect((()=>(c.addEventListener("load",(e=>f(e))),p.current.appendChild(c),()=>{m()})),[n.hash]),wp.element.createElement("div",{className:"vf-block__view",ref:p})};var xa=l.default.memo(ka);const Ea=e=>{const{isEditing:n,isEditable:r,isPlugin:a,isRenderable:i,isSelected:s}=e,l=(e=>{let{clientId:n,name:r}=e;const[o,a]=t.useState(null);return o||(b.hasOwnProperty(r)||(b[r]=0),b[r]++,a(v([n,b[r]]))),o})(e),[c,u]=va(e),[p,f]=t.useState(100);if(!e.attributes.ver){const t={ver:e.ver||"1.0.0"};a&&(t.defaults=1),e.setAttributes(t)}const m=()=>{e.setAttributes({mode:n?"view":"edit"})},d=r&&i,h=r&&n,g=!h&&!u&&c,y=e=>e!==p&&f(e);h&&y(100);const _={className:`vf-block ${e.className}`,"data-ver":e.attributes.ver,"data-name":e.name,"data-editing":n,"data-loading":u,"data-selected":s,style:{minHeight:`${p}px`}};return wp.element.createElement(t.Fragment,null,d&&wp.element.createElement(ya,{isEditing:n,onToggle:m}),wp.element.createElement("div",_,h&&wp.element.createElement(wa,{onToggle:i?m:null,children:e.children}),g&&wp.element.createElement(xa,{render:c,uniqueId:l,onHeight:y}),u&&wp.element.createElement(o.Spinner,null)))},La=e=>{const a=m();let{attributes:i,example:s,fields:l,styles:c,allowedBlocks:u}=e;const f=Array.isArray(u),d=!(!Array.isArray(l)||!l.length),h=!(!Array.isArray(c)||!c.length),v=!1!==e.isRenderable;i={...a.attributes,...i||{},__isExample:{type:"integer",default:0}},s={...s},s.attributes={...s.attributes,mode:"view",__isExample:1},v&&(i.render={type:"string",default:""}),(d||f)&&(i.mode={type:"string",default:"edit"});const b=[],g=[];d&&l.forEach((e=>{e.inspector?g.push(e):b.push(e)}));let y=a=>{const i=e.ver,s=!(!a.attributes.mode||1===a.attributes.__isExample),l="edit"===a.attributes.mode;return wp.element.createElement(t.Fragment,null,wp.element.createElement(Ea,p({},a,{ver:i,isRenderable:v,isEditable:s,isEditing:l}),!!b.length&&wp.element.createElement(B,p({},a,{fields:b})),f&&wp.element.createElement(r.InnerBlocks,{allowedBlocks:u})),!!g.length&&wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Settings"),initialOpen:!1},wp.element.createElement(B,p({},a,{fields:g})))))};return Array.isArray(e.withHOC)&&e.withHOC.forEach((e=>{let[t,...n]=e;return y=t(y,...n)})),{...a,name:e.name,title:e.title,category:"vf/core",parent:e.parent||null,description:n.__("Visual Framework (core)"),keywords:[...a.keywords],attributes:i,example:s,styles:h?c:[],supports:{...a.supports,customClassName:h,inserter:!1!==e.isInsertable},transforms:{...e.transforms||null},edit:y,save:()=>f?wp.element.createElement(t.Fragment,null,wp.element.createElement(r.InnerBlocks.Content,null)):null}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-blockquote"]={root:function(e,t,n,r,o){var a="";try{var i,s,l,c;r.contextOrFrameLookup(t,n,"context")&&(i=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"id"),n.set("id",i,!0),n.topLevel&&t.setVariable("id",i),n.topLevel&&t.addExport("id",i),s=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"override_class"),n.set("override_class",s,!0),n.topLevel&&t.setVariable("override_class",s),n.topLevel&&t.addExport("override_class",s),l=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"blockquote_text"),n.set("blockquote_text",l,!0),n.topLevel&&t.setVariable("blockquote_text",l),n.topLevel&&t.addExport("blockquote_text",l),c=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"blockquote_citation"),n.set("blockquote_citation",c,!0),n.topLevel&&t.setVariable("blockquote_citation",c),n.topLevel&&t.addExport("blockquote_citation",c)),a+="\n<blockquote",r.contextOrFrameLookup(t,n,"id")&&(a+=' id="',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"id"),e.opts.autoescape),a+='"'),a+=' class="vf-blockquote',r.contextOrFrameLookup(t,n,"override_class")&&(a+=" | ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"override_class"),e.opts.autoescape)),a+=' | vf-stack vf-stack--400">\n',(r.contextOrFrameLookup(t,n,"blockquote_text")||r.contextOrFrameLookup(t,n,"html")||r.contextOrFrameLookup(t,n,"text"))&&(a+='    <p class="vf-blockquote__text">',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"html")||r.contextOrFrameLookup(t,n,"blockquote_text")?r.contextOrFrameLookup(t,n,"html")||e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"blockquote_text")):r.contextOrFrameLookup(t,n,"text"),e.opts.autoescape),a+="</p>\n"),a+="\n",r.contextOrFrameLookup(t,n,"blockquote_citation")&&(a+='  <footer class="vf-blockquote__footer">\n    <cite class="vf-blockquote__citation">',a+=r.suppressValue(e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"blockquote_citation")),e.opts.autoescape),a+="</cite>\n  </footer>\n"),o(null,a+="\n</blockquote>\n")}catch(e){o(r.handleError(e,0,0))}}};var Oa=La({name:"vf/blockquote",title:n.__("Blockquote"),attributes:{html:{type:"string"}},fields:[{name:"html",control:"rich",default:"",label:"",tag:"p",placeholder:n.__("Type blockquote…")}],transforms:{from:[{type:"block",blocks:["core/paragraph"],transform:t=>e.createBlock("vf/blockquote",{html:t.content})},{type:"block",blocks:["core/quote"],transform:t=>{let{citation:n,value:r}=t;return/^\s*$/.test(n)&&(n=""),e.createBlock("vf/blockquote",{html:r+n})}}]}}),Fa=La({name:"vf/breadcrumbs-item",title:n.__("Breadcrumbs Item"),parent:["vf/breadcrumbs"],isRenderable:!1,attributes:{text:{type:"string",default:n.__("Breadcrumb")},url:{type:"string",default:"/"}},fields:[{name:"text",control:"text",label:n.__("Text")},{name:"url",control:"url",label:n.__("URL")}]});const Sa=(e,t)=>n=>{const r="BEM"in t,o=(e=>{const t=(e||"").match(/is-style-([^\s"]+)/);return t?t[1]:""})(n.className),a=n.name.replace(/^vf\//,"vf-"),i=r?`${a}--${o}`:o;return r&&!o?e(n):((e,t)=>n=>e({...n,transient:{...n.transient||{},[t.key]:t.value||n.attributes[t.key]}}))(e,{key:t.key,value:i})(n)},Ca=(e,t)=>n=>{const r={...n.transient||{}};return t.forEach((e=>{n.attributes.hasOwnProperty(e.from)&&(r[e.to]=n.attributes[e.from])})),e({...n,transient:r})},ja=e=>t=>{const n=a.select("core/block-editor").getBlocks(t.clientId),r={...t.transient||{},innerBlocks:[]};return n.forEach((e=>r.innerBlocks.push({name:e.name,attributes:{...e.attributes}}))),e({...t,transient:r})};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-breadcrumbs"]={root:function(e,t,n,r,o){var a="";try{a+='<nav class="vf-breadcrumbs" aria-label="Breadcrumb">\n  <ul class="vf-breadcrumbs__list | vf-list vf-list--inline">\n',n=n.push();var i=r.contextOrFrameLookup(t,n,"breadcrumbs");if(i)for(var s=(i=r.fromIterator(i)).length,l=0;l<i.length;l++){var c=i[l];n.set("breadcrumb",c),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",s-l),n.set("loop.revindex0",s-l-1),n.set("loop.first",0===l),n.set("loop.last",l===s-1),n.set("loop.length",s),a+='    <li class="vf-breadcrumbs__item"\n',r.memberLookup(c,"currentPage")&&(a+=' aria-current="location"'),a+=">\n",r.memberLookup(c,"breadcrumb_href")?(a+='      <a href="',a+=r.suppressValue(r.memberLookup(c,"breadcrumb_href"),e.opts.autoescape),a+='" class="vf-breadcrumbs__link">',a+=r.suppressValue(r.memberLookup(c,"text"),e.opts.autoescape),a+="</a>\n"):(a+="      ",a+=r.suppressValue(r.memberLookup(c,"text"),e.opts.autoescape),a+="\n"),a+="    </li>\n"}n=n.pop(),o(null,a+="  </ul>\n</nav>\n")}catch(e){o(r.handleError(e,0,0))}}};var Ba=La({name:"vf/breadcrumbs",title:n.__("Breadcrumbs"),allowedBlocks:["vf/breadcrumbs-item"],withHOC:[[e=>t=>{const n={...t.transient||{}};return n.breadcrumbs=[],Array.isArray(n.innerBlocks)&&n.innerBlocks.forEach((e=>{"vf/breadcrumbs-item"===e.name&&n.breadcrumbs.push({text:e.attributes.text,url:e.attributes.url,breadcrumb_href:e.attributes.url})})),e({...t,transient:n})}],[ja]]});const Pa=m(),Aa="1.0.0",Ta={...Pa,name:"vf/cluster",title:n.__("VF Cluster"),category:"vf/core",description:n.__("Visual Framework (core)"),attributes:{...Pa.attributes,alignment:{type:"string",default:"center"},spacing:{type:"string",default:"small"},customSpacing:{type:"number",default:0}}},Ia=e=>{const{alignment:t,spacing:n,customSpacing:r}=e.attributes,o=["vf-cluster"];"medium"===n?o.push("vf-cluster--600"):"large"===n?o.push("vf-cluster--800"):"custom"!==n&&o.push("vf-cluster--400");const a={"--vf-cluster__item--flex":"25% 1 0"};return"custom"===n&&(a["--vf-cluster-margin"]=`${r}px`),a["--vf-cluster-alignment"]="start"===t?"flex-start":"end"===t?"flex-end":"stretch"===t?"stretch":"center",wp.element.createElement("div",{"data-ver":e.isEdit?Aa:null,className:o.join(" "),style:a},wp.element.createElement("div",{className:"vf-cluster__inner"},e.children))};Ta.save=e=>wp.element.createElement(Ia,e,wp.element.createElement(r.InnerBlocks.Content,null)),Ta.edit=e=>{Aa!==e.attributes.ver&&e.setAttributes({ver:Aa});const{clientId:a}=e,{alignment:i,spacing:s}=e.attributes,c=t.useCallback(((t,n)=>{e.setAttributes({[t]:n}),"custom"!==n&&e.setAttributes({customSpacing:0})}),[a]),u=[{name:"alignment",label:n.__("Alignment"),control:"select",options:[{label:n.__("Stretch"),value:"stretch"},{label:n.__("Start"),value:"start"},{label:n.__("Center"),value:"center"},{label:n.__("End"),value:"end"}]},{name:"spacing",label:n.__("Spacing"),control:"select",options:[{label:n.__("Small"),value:"small"},{label:n.__("Medium"),value:"medium"},{label:n.__("Large"),value:"large"},{label:n.__("Custom"),value:"custom"}],onChange:c}];return"custom"===s&&u.push({name:"customSpacing",label:n.__("Custom spacing"),control:"range",allowReset:!0,min:0,max:100}),wp.element.createElement(l.default.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Settings"),initialOpen:!0},wp.element.createElement(B,p({},e,{fields:u})))),wp.element.createElement(Ia,p({},e,{isEdit:!0}),wp.element.createElement(r.InnerBlocks,{renderAppender:()=>wp.element.createElement(r.InnerBlocks.ButtonBlockAppender,null)})))},(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-embed"]={root:function(e,t,n,r,o){var a="";try{a+='<div\n  class="vf-embed',1==r.contextOrFrameLookup(t,n,"vf_embed_variant_16x9")&&(a+=" vf-embed--16x9"),1==r.contextOrFrameLookup(t,n,"vf_embed_variant_4x3")&&(a+=" vf-embed--4x3"),1==r.contextOrFrameLookup(t,n,"vf_embed_variant_custom")&&(a+=" vf-embed--custom-ratio"),a+='"\n\n  style="',r.contextOrFrameLookup(t,n,"vf_embed_max_width")&&(a+="--vf-embed-max-width: ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"vf_embed_max_width"),e.opts.autoescape),a+=";\n"),1==r.contextOrFrameLookup(t,n,"vf_embed_variant_custom")&&(a+="    --vf-embed-custom-ratio-x: ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"vf_embed_custom_ratio_X"),e.opts.autoescape),a+=";\n    --vf-embed-custom-ratio-y: ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"vf_embed_custom_ratio_Y"),e.opts.autoescape),a+=";"),a+='"\n>',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"vf_embedded_content"),e.opts.autoescape),o(null,a+="</div>\n")}catch(e){o(r.handleError(e,0,0))}}};const Va={"2:1":{label:n.__("(2:1) Cinema"),ratio:"2:1",width:640,height:320},"16:9":{label:n.__("(16:9) Widescreen"),ratio:"16:9",width:640,height:360},"4:3":{label:n.__("(4:3) Standard"),ratio:"4:3",width:640,height:480},"1:1":{label:n.__("(1:1) Square"),ratio:"1:1",width:640,height:640}};var Na=La({name:"vf/embed",title:n.__("Embed"),attributes:{url:{type:"string"},responsive:{type:"integer",default:1},ratio:{type:"string",default:"16:9"},width:{type:"integer"},height:{type:"integer"},maxWidth:{type:"string",default:0}},fields:[{name:"url",control:"url",label:n.__("URL"),disableSuggestions:!0},{name:"ratio",control:"select",label:n.__("Preset Ratio"),inspector:!0,options:Object.keys(Va).map((e=>({label:Va[e].label,value:e})))},{name:"width",control:"number",label:n.__("Width"),help:n.__("Deselect preset to set a custom width."),inspector:!0,max:1920,min:320},{name:"height",control:"number",label:n.__("Height"),help:n.__("Deselect preset to set a custom height."),inspector:!0,max:1080,min:180},{name:"maxWidth",control:"number",label:n.__("Maximum Width"),help:n.__("Restrict embed resize to this width."),inspector:!0,max:1920,min:0}],withHOC:[[e=>t=>{const n={...t.transient||{}};let{ratio:r,width:o,height:a,maxWidth:i}=t.attributes;return r&&r in Va&&(o=Va[r].width,a=Va[r].height,t.setAttributes({width:o,height:a})),isNaN(o)&&(o=Va["16:9"].width,t.setAttributes({width:o})),isNaN(a)&&(a=Va["16:9"].height,t.setAttributes({height:a})),n.vf_embed_variant_custom=!0,n.vf_embed_custom_ratio_X=o,n.vf_embed_custom_ratio_Y=a,n.vf_embed_max_width=i>0?`${i}px`:"100%",n.vf_embedded_content="",n.src&&(n.vf_embedded_content=`<iframe width="${o}" height="${a}" src="${n.src}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`),e({...t,transient:n})}],[Ca,[{from:"url",to:"src"}]]]});const Ra=e=>{let{blockProps:t,forSave:n,children:o}=e;if(r.__experimentalBlock&&r.__experimentalBlock.div)return n?wp.element.createElement("div",t,o):wp.element.createElement(r.__experimentalBlock.div,t,o);if(r.useBlockProps){const e=n?r.useBlockProps.save(t):r.useBlockProps(t);return wp.element.createElement("div",e,o)}},Ma=m(),qa={...Ma,name:"vf/grid-column",title:n.__("Grid Column"),category:"vf/core",description:n.__("Visual Framework (core)"),parent:["vf/grid","vf/embl-grid"],supports:{...Ma.supports,inserter:!1,lightBlockWrapper:!0},attributes:{...Ma.attributes,span:{type:"integer",default:1}}};qa.save=e=>{const{span:t}=e.attributes,n=[];Number.isInteger(t)&&t>1&&n.push(`vf-grid__col--span-${t}`);const o={className:n.join(" ")};return wp.element.createElement(Ra,{blockProps:o,forSave:!0},wp.element.createElement(r.InnerBlocks.Content,null))},qa.edit=e=>{const{clientId:i}=e,{span:s}=e.attributes,{updateBlockAttributes:c}=a.useDispatch("core/block-editor"),{hasChildBlocks:u,hasSpanSupport:p,rootClientId:f}=a.useSelect((e=>{const{getBlockName:t,getBlockOrder:n,getBlockRootClientId:r}=e("core/block-editor"),o=r(i);return{rootClientId:o,hasChildBlocks:n(i).length>0,hasSpanSupport:"vf/grid"===t(o)}}),[i]);t.useEffect((()=>{p||1===s||e.setAttributes({span:1})}),[i]);const m=t.useCallback((t=>{s!==t&&(e.setAttributes({span:t}),c(f,{dirty:Date.now()}))}),[s,i,f]),d=[];p&&Number.isInteger(s)&&s>1&&d.push(`vf-grid__col--span-${s}`);const h={className:d.join(" ")};return wp.element.createElement(l.default.Fragment,null,p&&wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Advanced Settings"),initialOpen:!0},wp.element.createElement(o.RangeControl,{label:n.__("Column span"),help:n.__("Columns may be merged to fit."),value:Number.isInteger(s)?s:1,onChange:m,allowReset:!0,step:1,min:1,max:6}))),wp.element.createElement(Ra,{blockProps:h},wp.element.createElement(r.InnerBlocks,{templateLock:!1,renderAppender:u?void 0:()=>wp.element.createElement(r.InnerBlocks.ButtonBlockAppender,null)})))};const Da=(t,n,r,o)=>({type:"block",blocks:[t],isMatch:e=>1!==e.placeholder,transform:(t,a)=>{let i=a.map((e=>({attributes:{...e.attributes},innerBlocks:[...e.innerBlocks]})));for(;i.length<r;)i.push({});for(;i.length>o;){const e=i.pop();i[i.length-1].innerBlocks.push(...e.innerBlocks)}return e.createBlock(n,{columns:i.length},i.map((t=>e.createBlock("vf/grid-column",t.attributes||{},t.innerBlocks||[]))))}}),$a=m(),za="1.1.0",Ha={...$a,name:"vf/embl-grid",title:n.__("EMBL Grid"),category:"vf/core",description:n.__("Visual Framework (core)"),supports:{...$a.supports,lightBlockWrapper:!0},attributes:{...$a.attributes,placeholder:{type:"integer",default:0},columns:{type:"integer",default:0},sidebar:{type:"integer",default:0},centered:{type:"integer",default:0}}};Ha.save=e=>{const{placeholder:t,sidebar:n,centered:o}=e.attributes;if(1===t)return null;let a="embl-grid";n&&(a=`${a} embl-grid--has-sidebar`),o&&(a=`${a} embl-grid--has-centered-content`);const i=r.useBlockProps.save({className:a});return wp.element.createElement("div",i,wp.element.createElement(r.InnerBlocks.Content,null))},Ha.edit=i=>{za!==i.attributes.ver&&i.setAttributes({ver:za});const{clientId:s}=i,{columns:c,centered:u,sidebar:f,placeholder:m}=i.attributes;t.useEffect((()=>{0===c&&i.setAttributes({placeholder:1})}),[s]);const{replaceInnerBlocks:d}=a.useDispatch("core/block-editor"),{setColumns:h}=a.useSelect((t=>{const{getBlocks:n}=t("core/block-editor");return{setColumns:t=>{const r=n(s);t<r.length&&(e=>{const t=n(s),r=[];for(let n=e-1;n<t.length;n++)r.push(...t[n].innerBlocks);d(t[e-1].clientId,r,!1),d(s,n(s).slice(0,e),!1)})(t),t>r.length&&(t=>{const r=n(s);for(;r.length<t;)r.push(e.createBlock("vf/grid-column",{},[]));d(s,r,!1)})(t),i.setAttributes({columns:t,placeholder:0}),3!==t&&i.setAttributes({sidebar:0,centered:0})}}}),[s]),v=t.useCallback(((e,t)=>{t=t?1:0,i.setAttributes({sidebar:0,centered:0,[e]:t}),t&&h(3)})),b=[{control:"columns",min:2,max:4,value:c,onChange:h},{label:n.__("With Sidebar"),control:"toggle",name:"sidebar",onChange:v},{label:n.__("Centered Content"),control:"toggle",name:"centered",onChange:v}];if(1===m){const e=r.useBlockProps({className:"vf-block vf-block--placeholder"});return wp.element.createElement("div",e,wp.element.createElement(o.Placeholder,{label:n.__("EMBL Grid"),icon:"admin-generic"},wp.element.createElement(B,p({},i,{fields:b}))))}b[0].help=n.__("Content may be reorganised when columns are reduced."),b[1].help=n.__("3 column only."),b[2].help=b[1].help;let g="embl-grid";f&&(g=`${g} embl-grid--has-sidebar`),u&&(g=`${g} embl-grid--has-centered-content`);const y=r.useBlockProps({className:g});return wp.element.createElement(l.default.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Settings"),initialOpen:!0},wp.element.createElement(B,p({},i,{fields:b})))),wp.element.createElement("div",p({},y,{"data-ver":za,"data-embl":!0,"data-sidebar":f,"data-centered":u}),wp.element.createElement(r.InnerBlocks,{allowedBlocks:["vf/grid-column"],template:Array(c).fill(["vf/grid-column"]),templateLock:"all"})))},Ha.transforms={from:[Da("core/columns","vf/embl-grid",2,4),Da("vf/grid","vf/embl-grid",2,4)]};const Ua=m(),Wa=e=>wp.element.createElement(_,e),Ga={...Ua,name:"vf/grid",title:n.__("VF Grid"),category:"vf/core",description:n.__("Visual Framework (core)"),supports:{...Ua.supports,lightBlockWrapper:!0},attributes:{...Ua.attributes,placeholder:{type:"integer",default:0},columns:{type:"integer",default:0},dirty:{type:"integer",default:0}}};Ga.save=e=>{const{columns:t,placeholder:n}=e.attributes;if(1===n)return null;const o=`vf-grid | vf-grid__col-${t}`,a=r.useBlockProps.save({className:o});return wp.element.createElement("div",a,wp.element.createElement(r.InnerBlocks.Content,null))},Ga.edit=i=>{const{clientId:s}=i,{dirty:c,columns:u,placeholder:p}=i.attributes;t.useEffect((()=>{0===u&&i.setAttributes({placeholder:1})}),[s]);const{replaceInnerBlocks:f}=a.useDispatch("core/block-editor"),{setColumns:m,updateColumns:d}=a.useSelect((t=>{const{getBlocks:n,getBlockAttributes:r}=t("core/block-editor"),o=e=>{let t=0;return e.forEach((e=>{const{span:n}=e.attributes;Number.isInteger(n)&&n>0?t+=n:t++})),t},a=t=>{i.setAttributes({columns:t,placeholder:0});const r=n(s),a=o(r);t<a&&(e=>{let t=n(s),r=[];for(;t.length>1&&o(t)>e;)r=r.concat(t.pop().innerBlocks);f(t[t.length-1].clientId,r.concat(t[t.length-1].innerBlocks),!1),f(s,n(s).slice(0,t.length),!1)})(t),t>a&&(t=>{const r=n(s);for(;o(r)<t;)r.push(e.createBlock("vf/grid-column",{},[]));f(s,r,!1)})(t)};return{setColumns:a,updateColumns:()=>{const{columns:e}=r(s);a(e),i.setAttributes({dirty:0})}}}),[s]);if(t.useEffect((()=>{c>0&&d()}),[c]),1===p){const e=r.useBlockProps({className:"vf-block vf-block--placeholder"});return wp.element.createElement(l.default.Fragment,null,wp.element.createElement("div",e,wp.element.createElement(o.Placeholder,{label:n.__("VF Grid"),icon:"admin-generic"},wp.element.createElement(Wa,{value:u,min:1,max:6,onChange:t.useCallback((e=>m(e)),[])}))))}const h=`vf-grid | vf-grid__col-${u}`,v={"--block-columns":u},b=r.useBlockProps({className:h,style:v});return wp.element.createElement(l.default.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Advanced Settings"),initialOpen:!0},wp.element.createElement(Wa,{value:u,min:1,max:6,onChange:t.useCallback((e=>m(e)),[]),help:n.__("Content may be reorganised when columns are reduced.")}))),wp.element.createElement("div",b,wp.element.createElement(r.InnerBlocks,{allowedBlocks:["vf/grid-column"],templateLock:"all"})))},Ga.transforms={from:[Da("core/columns","vf/grid",1,6),Da("vf/embl-grid","vf/grid",1,6)]};const Ka=m(),Ya="1.0.0",Ja={...Ka,name:"vf/tabs-section",title:n.__("VF Tab Section"),category:"vf/core",description:n.__("Visual Framework (core)"),parent:["vf/tabs"],supports:{...Ka.supports,inserter:!1},attributes:{...Ka.attributes,id:{type:"string",default:""},label:{type:"string",default:""},geolocation:{type:"string",default:""},unlabelled:{type:"integer",default:0}}};Ja.save=e=>{const{id:t,label:n,unlabelled:o,geolocation:a}=e.attributes,i={className:"vf-tabs__section"};""!==t&&(i.id=`vf-tabs__section-${t}`);const s={};return 1===o&&(s.className="vf-u-sr-only"),wp.element.createElement("section",i,wp.element.createElement("h2",s,n),wp.element.createElement(r.InnerBlocks.Content,null))},Ja.edit=e=>{Ya!==e.attributes.ver&&e.setAttributes({ver:Ya});const{clientId:i}=e;let{id:s,label:c,unlabelled:u,geolocation:f}=e.attributes;const{removeBlock:m,updateBlockAttributes:d}=a.useDispatch("core/block-editor"),{tabOrder:h,updateTabs:v}=a.useSelect((e=>{const{getBlockOrder:t,getBlockRootClientId:n}=e("core/block-editor"),r=n(i);return{tabOrder:t(r).indexOf(i)+1,updateTabs:()=>{d(r,{dirty:Date.now()})}}}),[i]);t.useEffect((()=>{""===s&&e.setAttributes({id:i})}),[s]),t.useEffect((()=>{""===c&&e.setAttributes({label:n.__(`Tab ${h}`)})}),[c]),t.useEffect((()=>{v()}),[s,c,f,h]);const b=t.useCallback(((t,n)=>{"id"===t&&(n=n.replace(/[\s\./]+/g,"-").replace(/[^\w-]+/g,"").toLowerCase().trim()),e.setAttributes({[t]:n})}),[i]),g=[{name:"label",control:"text",label:n.__("Tab Label"),onChange:b},{name:"unlabelled",control:"toggle",label:n.__("Hide Heading"),onChange:b},{name:"id",control:"text",label:n.__("Anchor ID"),onChange:b},{name:"geolocation",control:"text",label:n.__("Geolocation"),onChange:b},{control:"button",label:n.__("Delete Tab"),isSecondary:!0,isDestructive:!0,onClick:()=>{m(i,!1)}}];return wp.element.createElement(l.default.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Settings"),initialOpen:!0},wp.element.createElement(B,p({},e,{fields:g})))),wp.element.createElement("div",{className:"vf-tabs__section"},!u&&wp.element.createElement("h2",null,c),wp.element.createElement(r.InnerBlocks,null)))};const Xa=m(),Qa="1.0.0",Za={...Xa,name:"vf/tabs",title:n.__("VF Tabs"),category:"vf/core",description:n.__("Visual Framework (core)"),attributes:{...Xa.attributes,dirty:{type:"integer",default:0},tabs:{type:"array",default:[]}}};Za.save=e=>{const t=r.useBlockProps.save({className:"vf-tabs"});return wp.element.createElement("div",t,wp.element.createElement("ul",{className:"vf-tabs__list","data-vf-js-tabs":!0},e.attributes.tabs.map(((e,t)=>wp.element.createElement("li",{key:t+e.id,className:"vf-tabs__item"},wp.element.createElement("a",{className:"vf-tabs__link",href:`#vf-tabs__section-${e.id}`,"data-vf-js-location-nearest-activation-target":e.geolocation},e.label))))),wp.element.createElement("div",{className:"vf-tabs-content","data-vf-js-tabs-content":!0},wp.element.createElement(r.InnerBlocks.Content,null)))},Za.edit=i=>{Qa!==i.attributes.ver&&i.setAttributes({ver:Qa});const{clientId:s}=i,{dirty:c,tabs:u}=i.attributes,{replaceInnerBlocks:f,selectBlock:m}=a.useDispatch("core/block-editor"),{appendTab:d,getTabs:h,getTabsOrder:v,updateTabs:b}=a.useSelect((t=>{const{getBlockOrder:n,getBlocks:r}=t("core/block-editor"),o=()=>r(s);return{appendTab:()=>{const t=o();t.push(e.createBlock("vf/tabs-section",{},[])),f(s,t,!1),m(t.slice(-1)[0].clientId)},getTabs:o,getTabsOrder:()=>n(s),updateTabs:()=>{const e=o(),t=[];e.forEach((e=>{const{id:n,label:r,geolocation:o}=e.attributes;t.push({id:n,label:r,geolocation:o})})),i.setAttributes({dirty:0,tabs:t})}}}),[s]),g=v(),y=t.useCallback((e=>{e<g.length&&m(g[e])}),[g]);t.useEffect((()=>{0===c&&Object.keys(u).length!==h().length&&i.setAttributes({dirty:Date.now()})}),[h().length]),t.useEffect((()=>{c>0&&b()}),[c]);const _=[{control:"button",label:n.__("Add Tab"),isSecondary:!0,icon:"insert",onClick:()=>{d()}}],w=r.useBlockProps({className:"vf-tabs"});return wp.element.createElement(l.default.Fragment,null,wp.element.createElement(r.InspectorControls,null,wp.element.createElement(o.PanelBody,{title:n.__("Settings"),initialOpen:!0},wp.element.createElement(B,{fields:_}))),wp.element.createElement("div",p({},w,{"data-ver":Qa}),wp.element.createElement("ul",{className:"vf-tabs__list"},u.map(((e,t)=>wp.element.createElement("li",{key:t+e.id,className:"vf-tabs__item"},wp.element.createElement("a",{className:"vf-tabs__link",onClick:()=>y(t)},e.label)))),wp.element.createElement("li",{className:"vf-tabs__item"},wp.element.createElement(o.Button,p({},_[0],{isTertiary:!0,isSecondary:!1}),wp.element.createElement("span",null,_[0].label)))),wp.element.createElement(r.InnerBlocks,{allowedBlocks:["vf/tabs-section"],template:Array(1).fill(["vf/tabs-section"])})))};const ei=La({name:"vf/activity-item",title:n.__("Activity Item"),parent:["vf/activity-list"],isRenderable:!1,attributes:{text:{type:"string",default:'<strong>Author</strong> published <a href="#">\'Article Title\'</a> on <a href="#">Source</a>.'}},fields:[{name:"text",control:"rich",label:"",tag:"p",placeholder:n.__("Type activity…")}]});var ti={...ei,supports:{...ei.supports,inserter:!1}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-activity-list"]={root:function(e,t,n,r,o){var a="";try{a+='<div class="vf-activity">\n\n  <p class="vf-activity__date">',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"date"),e.opts.autoescape),a+='</p>\n\n  <ul class="vf-activity__list | vf-list">\n\n',n=n.push();var i=r.contextOrFrameLookup(t,n,"list");if(i)for(var s=(i=r.fromIterator(i)).length,l=0;l<i.length;l++){var c=i[l];n.set("item",c),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",s-l),n.set("loop.revindex0",s-l-1),n.set("loop.first",0===l),n.set("loop.last",l===s-1),n.set("loop.length",s),a+='\n    <li class="vf-activity__item">\n      ',a+=r.suppressValue(c,e.opts.autoescape),a+="\n    </li>\n\n"}n=n.pop(),o(null,a+="\n  </ul>\n</div>\n")}catch(e){o(r.handleError(e,0,0))}}};const ni=La({name:"vf/activity-list",title:n.__("Activity List"),attributes:{heading:{type:"string",default:n.__("Activity List")}},fields:[{name:"heading",control:"text",label:n.__("Heading")}],allowedBlocks:["vf/activity-item"],transforms:{from:[{type:"block",blocks:["core/list"],transform:t=>{const n=[];if("object"!=typeof window)return e.createBlock("vf/activity-list");const r=window.document.createElement("ul");return r.innerHTML=t.values,r.children.forEach((t=>{"li"===t.nodeName.toLowerCase()&&n.push(e.createBlock("vf/activity-item",{text:t.innerHTML}))})),e.createBlock("vf/activity-list",{},n)}}]},withHOC:[[Ca,[{from:"heading",to:"date"}]],[e=>t=>{const n={...t.transient||{}};return n.list=[],Array.isArray(n.innerBlocks)&&n.innerBlocks.forEach((e=>{"vf/activity-item"===e.name&&n.list.push(e.attributes.text)})),e({...t,transient:n})}],[ja]]});var ri={...ni,supports:{...ni.supports,inserter:!1}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-badge"]={root:function(e,t,n,r,o){var a="";try{var i,s,l,c,u;r.contextOrFrameLookup(t,n,"context")&&(a+="\n",i=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"badge_href"),n.set("badge_href",i,!0),n.topLevel&&t.setVariable("badge_href",i),n.topLevel&&t.addExport("badge_href",i),s=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"theme"),n.set("theme",s,!0),n.topLevel&&t.setVariable("theme",s),n.topLevel&&t.addExport("theme",s),l=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"text"),n.set("text",l,!0),n.topLevel&&t.setVariable("text",l),n.topLevel&&t.addExport("text",l),c=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"style"),n.set("style",c,!0),n.topLevel&&t.setVariable("style",c),n.topLevel&&t.addExport("style",c),u=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"html"),n.set("html",u,!0),n.topLevel&&t.setVariable("html",u),n.topLevel&&t.addExport("html",u),a+="\n"),a+=r.suppressValue(e.getExtension("spaceless").run(t,(function(o){o||(o=function(e){if(e)throw e});var a,i,s="";if(s+="\n",r.contextOrFrameLookup(t,n,"badge_href")?(n.set("tags","a",!0),n.topLevel&&t.setVariable("tags","a"),n.topLevel&&t.addExport("tags","a")):(a="span",n.set("tags",a,!0),n.topLevel&&t.setVariable("tags",a),n.topLevel&&t.addExport("tags",a)),s+="\n",s+="\n",r.contextOrFrameLookup(t,n,"theme")&&(i=r.contextOrFrameLookup(t,n,"theme"),n.set("theme_class",i,!0),n.topLevel&&t.setVariable("theme_class",i),n.topLevel&&t.addExport("theme_class",i)),s+="\n\n",s+="\n<",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"tags"),e.opts.autoescape),s+="\n","a"==r.contextOrFrameLookup(t,n,"tags")&&(s+=' href="',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"badge_href")?r.contextOrFrameLookup(t,n,"badge_href"):"#",e.opts.autoescape),s+='"'),s+="\n",r.contextOrFrameLookup(t,n,"id")&&(s+=' id="',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"id"),e.opts.autoescape),s+='"'),s+='\nclass="vf-badge',r.contextOrFrameLookup(t,n,"theme_class")&&(s+=" vf-badge--",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"theme_class"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"style")){n=n.push();var l=r.contextOrFrameLookup(t,n,"style");if(l)for(var c=(l=r.fromIterator(l)).length,u=0;u<l.length;u++){var p=l[u];n.set("styles",p),n.set("loop.index",u+1),n.set("loop.index0",u),n.set("loop.revindex",c-u),n.set("loop.revindex0",c-u-1),n.set("loop.first",0===u),n.set("loop.last",u===c-1),n.set("loop.length",c),s+=" vf-badge--",s+=r.suppressValue(p,e.opts.autoescape)}n=n.pop()}return r.contextOrFrameLookup(t,n,"override_class")&&(s+=" | ",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"override_class"),e.opts.autoescape)),s+='">',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"html")?e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"html")):r.contextOrFrameLookup(t,n,"text"),e.opts.autoescape),s+="</",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"tags"),e.opts.autoescape),o(null,s+=">\n"),s}),null),e.opts.autoescape),o(null,a)}catch(e){o(r.handleError(e,0,0))}}};const oi=La({name:"vf/badge",title:n.__("Badge"),attributes:{text:{type:"string",default:n.__("Badge")},outline:{type:"integer"},rounded:{type:"integer"},pill:{type:"integer"}},fields:[{name:"text",control:"text",label:n.__("Text")},{name:"outline",control:"true_false",label:n.__("Outline"),inspector:!0},{name:"rounded",control:"true_false",label:n.__("Rounded"),inspector:!0},{name:"pill",control:"true_false",label:n.__("Pill"),inspector:!0}],styles:[{name:"default",label:n.__("Default"),isDefault:!0},{name:"primary",label:n.__("Primary")},{name:"secondary",label:n.__("Secondary")},{name:"tertiary",label:n.__("Tertiary")}],withHOC:[[e=>t=>{const n={...t.transient||{}};return n.style=[],t.attributes.outline&&n.style.push("outline"),t.attributes.rounded&&n.style.push("rounded"),t.attributes.pill&&n.style.push("pill"),e({...t,transient:n})}],[Sa,{key:"theme_class"}]]});var ai={...oi,supports:{...oi.supports,inserter:!1}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-box"]={root:function(e,t,n,r,o){var a="";try{var i,s,l,c,u,p,f,m,d,h;r.contextOrFrameLookup(t,n,"context")&&(i=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"deprecated_text"),n.set("deprecated_text",i,!0),n.topLevel&&t.setVariable("deprecated_text",i),n.topLevel&&t.addExport("deprecated_text",i),s=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"box_href"),n.set("box_href",s,!0),n.topLevel&&t.setVariable("box_href",s),n.topLevel&&t.addExport("box_href",s),l=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"id"),n.set("id",l,!0),n.topLevel&&t.setVariable("id",l),n.topLevel&&t.addExport("id",l),c=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"variant"),n.set("variant",c,!0),n.topLevel&&t.setVariable("variant",c),n.topLevel&&t.addExport("variant",c),u=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"theme"),n.set("theme",u,!0),n.topLevel&&t.setVariable("theme",u),n.topLevel&&t.addExport("theme",u),p=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"box_modifier"),n.set("box_modifier",p,!0),n.topLevel&&t.setVariable("box_modifier",p),n.topLevel&&t.addExport("box_modifier",p),f=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"box_spacing"),n.set("box_spacing",f,!0),n.topLevel&&t.setVariable("box_spacing",f),n.topLevel&&t.addExport("box_spacing",f),m=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"override_class"),n.set("override_class",m,!0),n.topLevel&&t.setVariable("override_class",m),n.topLevel&&t.addExport("override_class",m),d=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"box_heading"),n.set("box_heading",d,!0),n.topLevel&&t.setVariable("box_heading",d),n.topLevel&&t.addExport("box_heading",d),h=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"box_text"),n.set("box_text",h,!0),n.topLevel&&t.setVariable("box_text",h),n.topLevel&&t.addExport("box_text",h)),a+="\n<div",r.contextOrFrameLookup(t,n,"id")&&(a+=' id="',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"id"),e.opts.autoescape),a+='"'),a+='\n  class="vf-box',r.contextOrFrameLookup(t,n,"box_href")&&(a+=" vf-box--is-link"),r.contextOrFrameLookup(t,n,"box_spacing")&&(a+=" vf-box--",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"box_spacing"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"theme")&&(a+=" vf-box-theme--",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"theme"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"variant")&&(a+=" vf-box--",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"variant"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"box_modifier")&&(a+=" ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"box_modifier"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"override_class")&&(a+=" | ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"override_class"),e.opts.autoescape)),a+='">\n\n  <h3 class="vf-box__heading">',r.contextOrFrameLookup(t,n,"box_href")&&(a+='<a class="vf-box__link" href="',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"box_href")?r.contextOrFrameLookup(t,n,"box_href"):"#",e.opts.autoescape),a+='">'),a+=r.suppressValue(r.contextOrFrameLookup(t,n,"box_heading"),e.opts.autoescape),r.contextOrFrameLookup(t,n,"box_href")&&(a+="</a>"),a+='</h3>\n  <p class="vf-box__text">',a+=r.suppressValue(e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"box_text")),e.opts.autoescape),o(null,a+="</p>\n</div>\n")}catch(e){o(r.handleError(e,0,0))}}};var ii=La({ver:"1.0.2",name:"vf/box",title:n.__("Box"),isInsertable:!1,attributes:{box_heading:{type:"string"},box_text:{type:"string"}},example:{attributes:{box_heading:n.__("Did You Know?"),box_text:n.__("Invasive cancer is the leading cause of death in the developed world and the second leading in the developing world.")}},fields:[{name:"box_heading",control:"rich",label:"",tag:"h3",placeholder:n.__("Type box heading…")},{name:"box_text",control:"rich",label:"",tag:"p",placeholder:n.__("Type box content…")}],styles:[{name:"default",label:n.__("Default"),isDefault:!0},{name:"factoid",label:n.__("Factoid")},{name:"inlay",label:n.__("Inlayed")}],withHOC:[[Sa,{key:"box_modifier",BEM:!0}]]});(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-button"]={root:function(e,t,n,r,o){var a="";try{var i,s,l,c,u,p,f,m,d;r.contextOrFrameLookup(t,n,"context")&&(i=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"button_href"),n.set("button_href",i,!0),n.topLevel&&t.setVariable("button_href",i),n.topLevel&&t.addExport("button_href",i),s=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"theme"),n.set("theme",s,!0),n.topLevel&&t.setVariable("theme",s),n.topLevel&&t.addExport("theme",s),l=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"id"),n.set("id",l,!0),n.topLevel&&t.setVariable("id",l),n.topLevel&&t.addExport("id",l),c=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"text"),n.set("text",c,!0),n.topLevel&&t.setVariable("text",c),n.topLevel&&t.addExport("text",c),u=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"style"),n.set("style",u,!0),n.topLevel&&t.setVariable("style",u),n.topLevel&&t.addExport("style",u),p=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"size"),n.set("size",p,!0),n.topLevel&&t.setVariable("size",p),n.topLevel&&t.addExport("size",p),f=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"override_class"),n.set("override_class",f,!0),n.topLevel&&t.setVariable("override_class",f),n.topLevel&&t.addExport("override_class",f),m=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"html"),n.set("html",m,!0),n.topLevel&&t.setVariable("html",m),n.topLevel&&t.addExport("html",m),d=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"text"),n.set("text",d,!0),n.topLevel&&t.setVariable("text",d),n.topLevel&&t.addExport("text",d)),a+="\n",a+=r.suppressValue(e.getExtension("spaceless").run(t,(function(o){o||(o=function(e){if(e)throw e});var a,i,s="";if(s+="\n",r.contextOrFrameLookup(t,n,"button_href")||r.contextOrFrameLookup(t,n,"href")?(n.set("tags","a",!0),n.topLevel&&t.setVariable("tags","a"),n.topLevel&&t.addExport("tags","a")):(a="button",n.set("tags",a,!0),n.topLevel&&t.setVariable("tags",a),n.topLevel&&t.addExport("tags",a)),s+="\n",s+="\n",r.contextOrFrameLookup(t,n,"theme")&&(i=r.contextOrFrameLookup(t,n,"theme"),n.set("theme_class",i,!0),n.topLevel&&t.setVariable("theme_class",i),n.topLevel&&t.addExport("theme_class",i)),s+="\n<",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"tags"),e.opts.autoescape),s+="\n","a"==r.contextOrFrameLookup(t,n,"tags")&&(s+=' href="',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"button_href")||r.contextOrFrameLookup(t,n,"href"),e.opts.autoescape),s+='"'),s+="\n",r.contextOrFrameLookup(t,n,"id")&&(s+=' id="',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"id"),e.opts.autoescape),s+='"'),s+='\nclass="vf-button',s+="\n",r.contextOrFrameLookup(t,n,"theme_class")&&(s+=" vf-button--",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"theme_class"),e.opts.autoescape)),r.contextOrFrameLookup(t,n,"style")){n=n.push();var l=r.contextOrFrameLookup(t,n,"style");if(l)for(var c=(l=r.fromIterator(l)).length,u=0;u<l.length;u++){var p=l[u];n.set("styles",p),n.set("loop.index",u+1),n.set("loop.index0",u),n.set("loop.revindex",c-u),n.set("loop.revindex0",c-u-1),n.set("loop.first",0===u),n.set("loop.last",u===c-1),n.set("loop.length",c),s+=" vf-button--",s+=r.suppressValue(p,e.opts.autoescape)}n=n.pop()}return r.contextOrFrameLookup(t,n,"size")&&(s+="  vf-button--",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"size"),e.opts.autoescape),s+="\n"),r.contextOrFrameLookup(t,n,"override_class")&&(s+=" | ",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"override_class"),e.opts.autoescape)),s+='">',s+=r.suppressValue(r.contextOrFrameLookup(t,n,"html")?e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"html")):r.contextOrFrameLookup(t,n,"text"),e.opts.autoescape),s+="</",s+=r.suppressValue(r.contextOrFrameLookup(t,n,"tags"),e.opts.autoescape),o(null,s+=">\n"),s}),null),e.opts.autoescape),o(null,a)}catch(e){o(r.handleError(e,0,0))}}};const si=La({name:"vf/button",title:n.__("Button"),attributes:{href:{type:"string",default:"/"},text:{type:"string",default:n.__("Button")},theme:{type:"string",default:"primary"},size:{type:"string",default:""},outline:{type:"integer"},rounded:{type:"integer"},pill:{type:"integer"}},fields:[{name:"text",control:"text",label:n.__("Label")},{name:"href",control:"url",label:n.__("URL")},{name:"size",control:"select",label:n.__("Size"),inspector:!0,options:[{label:n.__("Small"),value:"sm"},{label:n.__("Large"),value:"lg"}]},{name:"outline",control:"true_false",label:n.__("Outline"),inspector:!0},{name:"rounded",control:"true_false",label:n.__("Rounded"),inspector:!0},{name:"pill",control:"true_false",label:n.__("Pill"),inspector:!0}],styles:[{name:"primary",label:n.__("Primary"),isDefault:!0},{name:"secondary",label:n.__("Secondary")},{name:"tertiary",label:n.__("Tertiary")}],transforms:{from:[{type:"block",blocks:["core/button"],transform:t=>{const{url:n,text:r,className:o}=t,a=/\-outline/.test(o)?1:0;return e.createBlock("vf/button",{text:r,outline:a,href:n})}}]},withHOC:[[e=>t=>{const n={...t.transient||{}};return n.style=[],t.attributes.outline&&n.style.push("outline"),t.attributes.rounded&&n.style.push("rounded"),t.attributes.pill&&n.style.push("pill"),e({...t,transient:n})}],[Ca,[{from:"href",to:"button_href"}]],[Sa,{key:"theme"}]]});var li={...si,supports:{...si.supports,inserter:!1}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-divider"]={root:function(e,t,n,r,o){var a="";try{var i,s;r.contextOrFrameLookup(t,n,"context")&&(i=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"id"),n.set("id",i,!0),n.topLevel&&t.setVariable("id",i),n.topLevel&&t.addExport("id",i),s=r.memberLookup(r.contextOrFrameLookup(t,n,"context"),"override_class"),n.set("override_class",s,!0),n.topLevel&&t.setVariable("override_class",s),n.topLevel&&t.addExport("override_class",s)),a+="\n<hr\n",r.contextOrFrameLookup(t,n,"id")&&(a+=' id="',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"id"),e.opts.autoescape),a+='"'),a+='class="vf-divider',r.contextOrFrameLookup(t,n,"override_class")&&(a+=" | ",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"override_class"),e.opts.autoescape)),a+='"',r.contextOrFrameLookup(t,n,"context_margin__inline")&&(a+=' style="--context-margin--inline: ',a+=r.suppressValue(r.contextOrFrameLookup(t,n,"context_margin__inline"),e.opts.autoescape),a+=';"'),o(null,a+=">\n")}catch(e){o(r.handleError(e,0,0))}}};const ci=La({name:"vf/divider",title:n.__("Divider"),attributes:{},transforms:{from:[{type:"block",blocks:["core/separator"],transform:t=>e.createBlock("vf/divider")}]}});var ui={...ci,supports:{...ci.supports,inserter:!1}};(window.nunjucksPrecompiled=window.nunjucksPrecompiled||{})["vf-lede"]={root:function(e,t,n,r,o){var a="";try{a+='<p class="vf-lede">',a+=r.suppressValue(e.getFilter("safe").call(t,r.contextOrFrameLookup(t,n,"vf_lede_text")),e.opts.autoescape),o(null,a+="</p>\n")}catch(e){o(r.handleError(e,0,0))}}};const pi=La({name:"vf/lede",title:n.__("Lede"),attributes:{text:{type:"string"}},fields:[{name:"text",control:"rich",label:"",tag:"h1"}],transforms:{from:[{type:"block",blocks:["core/heading","core/paragraph"],transform:t=>e.createBlock("vf/lede",{text:t.content})}]},withHOC:[[Ca,[{from:"text",to:"vf_lede_text"}]]]});var fi={...pi,supports:{...pi.supports,inserter:!1}};const mi=m(),di={};var hi={...mi,name:"vf/plugin",title:n.__("Preview"),category:"vf/wp",description:"",attributes:{...mi.attributes,ref:{type:"string"}},supports:{...mi.supports,inserter:!1,reusable:!1},edit:(e=>{const n={fields:{}};return r=>{const{clientId:o}=r;return t.useEffect((()=>{i.hasAction("vf_plugin_acf_update","vf_plugin")||i.addAction("vf_plugin_acf_update","vf_plugin",(e=>{n.fields[e.name]=e.value,r.setAttributes({__acfUpdate:Date.now()})}))}),[o]),e({...r,transient:{...r.transient||{},...n}})}})((e=>{const[n]=t.useState(acf.uniqid("block_")),[r,a]=t.useState(!0),[i,s]=t.useState(!0),[l,c]=t.useState(""),[u,p]=t.useState(null),f=t.useRef(null),{clientId:m}=e,d=t.useCallback((e=>{const{id:t}=e.data;t&&t.includes(n)&&(clearTimeout(window[`${t}_onMessage`]),window[`${t}_onMessage`]=setTimeout((()=>{window.removeEventListener("message",d),s(!1)}),100))}),[m]);t.useEffect((()=>{s(!0),a(!0),window.removeEventListener("message",d),window.addEventListener("message",d);(async()=>{let t;const r={is_plugin:1,...e.transient.fields},o=v(r);if(di.hasOwnProperty(o))t=await new Promise((e=>setTimeout((()=>{e(di[o])}),1)));else{const a=await wp.ajax.post("acf/ajax/fetch-block",{query:{preview:!0},nonce:acf.get("nonce"),post_id:acf.get("post_id"),block:JSON.stringify({id:n,name:e.attributes.ref,data:r,align:"",mode:"preview"})});a&&a.preview&&(t=a.preview,di[o]=t)}if(t){const e=t.split(/<script[^>]*?>/)[0],n=t.match(/<script[^>]*?>(.*)<\/script>/ms);p(Array.isArray(n)?n[1]:null),c(e),a(!1)}})()}),[m,e.attributes.__acfUpdate]),t.useEffect((()=>{if(!r&&(f.current.innerHTML=l,u)){const e=document.createElement("script");e.type="text/javascript",e.innerHTML=u,f.current.appendChild(e)}}),[r]);const h={className:`vf-block ${e.className}`,"data-ver":e.attributes.ver,"data-name":e.name,"data-editing":!1,"data-loading":i,style:{}};i&&(h.style.minHeight="100px");const b={};return i&&(b.visibility="hidden"),wp.element.createElement("div",h,i&&wp.element.createElement(o.Spinner,null),wp.element.createElement("div",{ref:f,style:b,className:"vf-block__view"}))})),save:()=>null};
/**!
   * VF Gutenberg blocks
   */const{coreOptin:vi}=u();if(1===parseInt(vi)){[Ja,Za,qa,Ha,Ga,Ta,ai,Oa,li,ui,ti,ri,ii,Fa,Ba,fi,Na].forEach((t=>e.registerBlockType(t.name,t)))}e.registerBlockType("vf/plugin",hi),window.addEventListener("message",(e=>{let{data:t}=e;if(t!==Object(t)||!/^vfwp_/.test(t.id))return;const n=document.getElementById(t.id);n&&n.vfActive&&window.requestAnimationFrame((()=>{n.style.height=`${t.height}px`}))}))}));
